var app=function(){"use strict";function t(){}function n(t){return t()}function e(){return Object.create(null)}function r(t){t.forEach(n)}function i(t){return"function"==typeof t}function o(t,n){return t!=t?n==n:t!==n||t&&"object"==typeof t||"function"==typeof t}let a,s,l;function u(n,...e){if(null==n)return t;const r=n.subscribe(...e);return r.unsubscribe?()=>r.unsubscribe():r}function c(t,n,e){t.$$.on_destroy.push(u(n,e))}function h(t,n,e,r){return t[1]&&r?function(t,n){for(const e in n)t[e]=n[e];return t}(e.ctx.slice(),t[1](r(n))):e.ctx}function f(t,n){t.appendChild(n)}function d(t,n,e){t.insertBefore(n,e||null)}function p(t){t.parentNode.removeChild(t)}function g(t){return document.createElement(t)}function m(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function y(t){return document.createTextNode(t)}function v(){return y(" ")}function w(){return y("")}function x(t,n,e,r){return t.addEventListener(n,e,r),()=>t.removeEventListener(n,e,r)}function _(t,n,e){null==e?t.removeAttribute(n):t.getAttribute(n)!==e&&t.setAttribute(n,e)}function b(t,n,e,r){t.style.setProperty(n,e,r?"important":"")}function M(){if(void 0===s){s=!1;try{"undefined"!=typeof window&&window.parent&&window.parent.document}catch(t){s=!0}}return s}function $(t){l=t}function k(){if(!l)throw new Error("Function called outside component initialization");return l}function S(t){k().$$.on_mount.push(t)}function E(t){k().$$.on_destroy.push(t)}const N=[],A=[],T=[],F=[],z=Promise.resolve();let C=!1;function R(t){T.push(t)}let P=!1;const j=new Set;function I(){if(!P){P=!0;do{for(let t=0;t<N.length;t+=1){const n=N[t];$(n),L(n.$$)}for($(null),N.length=0;A.length;)A.pop()();for(let t=0;t<T.length;t+=1){const n=T[t];j.has(n)||(j.add(n),n())}T.length=0}while(N.length);for(;F.length;)F.pop()();C=!1,P=!1,j.clear()}}function L(t){if(null!==t.fragment){t.update(),r(t.before_update);const n=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,n),t.after_update.forEach(R)}}const q=new Set;let U;function G(){U={r:0,c:[],p:U}}function H(){U.r||r(U.c),U=U.p}function O(t,n){t&&t.i&&(q.delete(t),t.i(n))}function B(t,n,e,r){if(t&&t.o){if(q.has(t))return;q.add(t),U.c.push((()=>{q.delete(t),r&&(e&&t.d(1),r())})),t.o(n)}}function D(t,n){B(t,1,1,(()=>{n.delete(t.key)}))}function W(t){t&&t.c()}function X(t,e,o,a){const{fragment:s,on_mount:l,on_destroy:u,after_update:c}=t.$$;s&&s.m(e,o),a||R((()=>{const e=l.map(n).filter(i);u?u.push(...e):r(e),t.$$.on_mount=[]})),c.forEach(R)}function K(t,n){const e=t.$$;null!==e.fragment&&(r(e.on_destroy),e.fragment&&e.fragment.d(n),e.on_destroy=e.fragment=null,e.ctx=[])}function Z(t,n){-1===t.$$.dirty[0]&&(N.push(t),C||(C=!0,z.then(I)),t.$$.dirty.fill(0)),t.$$.dirty[n/31|0]|=1<<n%31}function Y(n,i,o,a,s,u,c,h=[-1]){const f=l;$(n);const d=n.$$={fragment:null,ctx:null,props:u,update:t,not_equal:s,bound:e(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(i.context||(f?f.$$.context:[])),callbacks:e(),dirty:h,skip_bound:!1,root:i.target||f.$$.root};c&&c(d.root);let g=!1;if(d.ctx=o?o(n,i.props||{},((t,e,...r)=>{const i=r.length?r[0]:e;return d.ctx&&s(d.ctx[t],d.ctx[t]=i)&&(!d.skip_bound&&d.bound[t]&&d.bound[t](i),g&&Z(n,t)),e})):[],d.update(),g=!0,r(d.before_update),d.fragment=!!a&&a(d.ctx),i.target){if(i.hydrate){const t=function(t){return Array.from(t.childNodes)}(i.target);d.fragment&&d.fragment.l(t),t.forEach(p)}else d.fragment&&d.fragment.c();i.intro&&O(n.$$.fragment),X(n,i.target,i.anchor,i.customElement),I()}$(f)}class V{$destroy(){K(this,1),this.$destroy=t}$on(t,n){const e=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return e.push(n),()=>{const t=e.indexOf(n);-1!==t&&e.splice(t,1)}}$set(t){var n;this.$$set&&(n=t,0!==Object.keys(n).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const J=[];function Q(t,n){return{subscribe:tt(t,n).subscribe}}function tt(n,e=t){let r;const i=new Set;function a(t){if(o(n,t)&&(n=t,r)){const t=!J.length;for(const t of i)t[1](),J.push(t,n);if(t){for(let t=0;t<J.length;t+=2)J[t][0](J[t+1]);J.length=0}}}return{set:a,update:function(t){a(t(n))},subscribe:function(o,s=t){const l=[o,s];return i.add(l),1===i.size&&(r=e(a)||t),o(n),()=>{i.delete(l),0===i.size&&(r(),r=null)}}}}const nt=tt(0),et=function(n,e,o){const a=!Array.isArray(n),s=a?[n]:n,l=e.length<2;return Q(o,(n=>{let o=!1;const c=[];let h=0,f=t;const d=()=>{if(h)return;f();const r=e(a?c[0]:c,n);l?n(r):f=i(r)?r:t},p=s.map(((t,n)=>u(t,(t=>{c[n]=t,h&=~(1<<n),o&&d()}),(()=>{h|=1<<n}))));return o=!0,d(),function(){r(p),f()}}))}(nt,(t=>t<480)),rt=["focus","blur","fullscreenchange","fullscreenerror","scroll","cut","copy","paste","keydown","keypress","keyup","auxclick","click","contextmenu","dblclick","mousedown","mouseenter","mouseleave","mousemove","mouseover","mouseout","mouseup","pointerlockchange","pointerlockerror","select","wheel","drag","dragend","dragenter","dragstart","dragleave","dragover","drop","touchcancel","touchend","touchmove","touchstart","pointerover","pointerenter","pointerdown","pointermove","pointerup","pointercancel","pointerout","pointerleave","gotpointercapture","lostpointercapture"];class it{constructor(){this.register=this.register.bind(this),this.unregister=this.unregister.bind(this),this.redraw=this.redraw.bind(this),this.resize=this.resize.bind(this),this.render=this.render.bind(this),this.currentLayerId=0,this.setups=new Map,this.renderers=new Map,this.needsSetup=!1,this.needsResize=!0,this.needsRedraw=!0,this.layerSequence=[]}redraw(){this.needsRedraw=!0}resize(){this.needsResize=!0,this.needsRedraw=!0}register({setup:t,render:n}){return t&&(this.setups.set(this.currentLayerId,t),this.needsSetup=!0),this.renderers.set(this.currentLayerId,n),this.needsRedraw=!0,this.currentLayerId++}unregister(t){this.renderers.delete(t),this.needsRedraw=!0}render({autoclear:t,pixelRatio:n,context:e,width:r,height:i}){const o={context:e,width:r,height:i};if(this.needsResize&&(e.setTransform(n,0,0,n,0,0),this.needsResize=!1),this.needsSetup){for(const[t,n]of this.setups)n(o),this.setups.delete(t);this.needsSetup=!1}if(this.needsRedraw){t&&e.clearRect(0,0,r,i);for(const t of this.layerSequence)this.renderers.get(t)(o);this.needsRedraw=!1}}}function ot(n){let e,r,o,a,s,l,u,c,f;const m=n[13].default,y=function(t,n,e,r){if(t){const i=h(t,n,e,r);return t[0](i)}}(m,n,n[12],null);return{c(){e=g("canvas"),s=v(),l=g("div"),y&&y.c(),_(e,"style",r="display: block; width: "+n[1]+"px; height: "+n[2]+"px;"+(n[3]?` ${n[3]}`:"")),_(e,"width",o=n[1]*n[0]),_(e,"height",a=n[2]*n[0]),b(l,"display","none")},m(r,o){var a;d(r,e,o),n[14](e),d(r,s,o),d(r,l,o),y&&y.m(l,null),n[15](l),u=!0,c||(a=n[6].call(null,e),f=a&&i(a.destroy)?a.destroy:t,c=!0)},p(t,[n]){(!u||14&n&&r!==(r="display: block; width: "+t[1]+"px; height: "+t[2]+"px;"+(t[3]?` ${t[3]}`:"")))&&_(e,"style",r),(!u||3&n&&o!==(o=t[1]*t[0]))&&_(e,"width",o),(!u||5&n&&a!==(a=t[2]*t[0]))&&_(e,"height",a),y&&y.p&&(!u||4096&n)&&function(t,n,e,r,i,o){if(i){const a=h(n,e,r,o);t.p(a,i)}}(y,m,t,t[12],u?function(t,n,e,r){if(t[2]&&r){const i=t[2](r(e));if(void 0===n.dirty)return i;if("object"==typeof i){const t=[],e=Math.max(n.dirty.length,i.length);for(let r=0;r<e;r+=1)t[r]=n.dirty[r]|i[r];return t}return n.dirty|i}return n.dirty}(m,t[12],n,null):function(t){if(t.ctx.length>32){const n=[],e=t.ctx.length/32;for(let t=0;t<e;t++)n[t]=-1;return n}return-1}(t[12]),null)},i(t){u||(O(y,t),u=!0)},o(t){B(y,t),u=!1},d(t){t&&p(e),n[14](null),t&&p(s),t&&p(l),y&&y.d(t),n[15](null),c=!1,f()}}}const at={};function st(t,n,e){let r,i,o,a,s,{$$slots:l={},$$scope:u}=n,{width:c=640,height:h=640,pixelRatio:f,style:d=null,autoclear:p=!0}=n;const g=function(){const t=k();return n=>{const e=rt.map((e=>x(n,e,(n=>function(t,n){const e=t.$$.callbacks[n.type];e&&e.slice().forEach((t=>t.call(this,n)))}(t,n)))));return{destroy:()=>e.forEach((t=>t()))}}}(),m=new it;function y(){m.render({context:i,width:c,height:h,pixelRatio:f,autoclear:p}),o=window.requestAnimationFrame(y)}return void 0===f&&(f="undefined"==typeof window?2:window.devicePixelRatio),function(t,n){k().$$.context.set(t,n)}(at,{register:m.register,unregister:m.unregister,redraw:m.redraw}),S((()=>{function t(){const t=[...a.children].map((t=>+t.dataset.layerId));e(11,m.layerSequence=t,m),m.redraw()}i=r.getContext("2d"),s=new MutationObserver(t),s.observe(a,{childList:!0}),t(),y()})),E((()=>{"undefined"!=typeof window&&(window.cancelAnimationFrame(o),s.disconnect())})),t.$$set=t=>{"width"in t&&e(1,c=t.width),"height"in t&&e(2,h=t.height),"pixelRatio"in t&&e(0,f=t.pixelRatio),"style"in t&&e(3,d=t.style),"autoclear"in t&&e(7,p=t.autoclear),"$$scope"in t&&e(12,u=t.$$scope)},t.$$.update=()=>{2183&t.$$.dirty&&m.resize()},[f,c,h,d,r,a,g,p,function(){m.redraw()},function(){return r},function(){return i},m,u,l,function(t){A[t?"unshift":"push"]((()=>{r=t,e(4,r)}))},function(t){A[t?"unshift":"push"]((()=>{a=t,e(5,a)}))}]}class lt extends V{constructor(t){super(),Y(this,t,st,ot,o,{width:1,height:2,pixelRatio:0,style:3,autoclear:7,redraw:8,getCanvas:9,getContext:10})}get redraw(){return this.$$.ctx[8]}get getCanvas(){return this.$$.ctx[9]}get getContext(){return this.$$.ctx[10]}}function ut(n){let e;return{c(){e=g("div"),_(e,"data-layer-id",n[0])},m(t,n){d(t,e,n)},p:t,i:t,o:t,d(t){t&&p(e)}}}function ct(t,n,e){const{register:r,unregister:i,redraw:o}=(a=at,k().$$.context.get(a));var a;let{setup:s,render:l=(()=>{})}=n;if("function"!=typeof s&&void 0!==s)throw new Error("setup must be a function");if("function"!=typeof l)throw new Error("render must be a function");const u=r({setup:s,render:l});return E((()=>i(u))),t.$$set=t=>{"setup"in t&&e(1,s=t.setup),"render"in t&&e(2,l=t.render)},t.$$.update=()=>{4&t.$$.dirty&&o()},[u,s,l]}class ht extends V{constructor(t){super(),Y(this,t,ct,ut,o,{setup:1,render:2})}}let ft;const dt=Date.now();function pt(t){return t}function gt(t,n){var e=n.id,r=n.bbox,i=null==n.properties?{}:n.properties,o=function(t,n){var e=function(t){if(null==t)return pt;var n,e,r=t.scale[0],i=t.scale[1],o=t.translate[0],a=t.translate[1];return function(t,s){s||(n=e=0);var l=2,u=t.length,c=new Array(u);for(c[0]=(n+=t[0])*r+o,c[1]=(e+=t[1])*i+a;l<u;)c[l]=t[l],++l;return c}}(t.transform),r=t.arcs;function i(t,n){n.length&&n.pop();for(var i=r[t<0?~t:t],o=0,a=i.length;o<a;++o)n.push(e(i[o],o));t<0&&function(t,n){for(var e,r=t.length,i=r-n;i<--r;)e=t[i],t[i++]=t[r],t[r]=e}(n,a)}function o(t){return e(t)}function a(t){for(var n=[],e=0,r=t.length;e<r;++e)i(t[e],n);return n.length<2&&n.push(n[0]),n}function s(t){for(var n=a(t);n.length<4;)n.push(n[0]);return n}function l(t){return t.map(s)}function u(t){var n,e=t.type;switch(e){case"GeometryCollection":return{type:e,geometries:t.geometries.map(u)};case"Point":n=o(t.coordinates);break;case"MultiPoint":n=t.coordinates.map(o);break;case"LineString":n=a(t.arcs);break;case"MultiLineString":n=t.arcs.map(a);break;case"Polygon":n=l(t.arcs);break;case"MultiPolygon":n=t.arcs.map(l);break;default:return null}return{type:e,coordinates:n}}return u(n)}(t,n);return null==e&&null==r?{type:"Feature",properties:i,geometry:o}:null==r?{type:"Feature",id:e,properties:i,geometry:o}:{type:"Feature",id:e,bbox:r,properties:i,geometry:o}}function mt(t,n){return null==t||null==n?NaN:t<n?-1:t>n?1:t>=n?0:NaN}function yt(t){let n=t,e=t,r=t;function i(t,n,i=0,o=t.length){if(i<o){if(0!==e(n,n))return o;do{const e=i+o>>>1;r(t[e],n)<0?i=e+1:o=e}while(i<o)}return i}return 2!==t.length&&(n=(n,e)=>t(n)-e,e=mt,r=(n,e)=>mt(t(n),e)),{left:i,center:function(t,e,r=0,o=t.length){const a=i(t,e,r,o-1);return a>r&&n(t[a-1],e)>-n(t[a],e)?a-1:a},right:function(t,n,i=0,o=t.length){if(i<o){if(0!==e(n,n))return o;do{const e=i+o>>>1;r(t[e],n)<=0?i=e+1:o=e}while(i<o)}return i}}}Q(Date.now()-dt,"undefined"==typeof window?function(){}:function t(n){return n(Date.now()-dt),ft=window.requestAnimationFrame((()=>t(n))),()=>window.cancelAnimationFrame(ft)});const vt=yt(mt).right;yt((function(t){return null===t?NaN:+t})).center;var wt=vt;class xt{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let e=0;for(let r=0;r<this._n&&r<32;r++){const i=n[r],o=t+i,a=Math.abs(t)<Math.abs(i)?t-(o-i):i-(o-t);a&&(n[e++]=a),t=o}return n[e]=t,this._n=e+1,this}valueOf(){const t=this._partials;let n,e,r,i=this._n,o=0;if(i>0){for(o=t[--i];i>0&&(n=o,e=t[--i],o=n+e,r=e-(o-n),!r););i>0&&(r<0&&t[i-1]<0||r>0&&t[i-1]>0)&&(e=2*r,n=o+e,e==n-o&&(o=n))}return o}}var _t=Math.sqrt(50),bt=Math.sqrt(10),Mt=Math.sqrt(2);function $t(t,n,e){var r=(n-t)/Math.max(0,e),i=Math.floor(Math.log(r)/Math.LN10),o=r/Math.pow(10,i);return i>=0?(o>=_t?10:o>=bt?5:o>=Mt?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(o>=_t?10:o>=bt?5:o>=Mt?2:1)}function kt(t){return Array.from(function*(t){for(const n of t)yield*n}(t))}var St=1e-6,Et=Math.PI,Nt=Et/2,At=Et/4,Tt=2*Et,Ft=180/Et,zt=Et/180,Ct=Math.abs,Rt=Math.atan,Pt=Math.atan2,jt=Math.cos,It=Math.sin,Lt=Math.sign||function(t){return t>0?1:t<0?-1:0},qt=Math.sqrt;function Ut(t){return t>1?Nt:t<-1?-Nt:Math.asin(t)}function Gt(){}function Ht(t,n){t&&Bt.hasOwnProperty(t.type)&&Bt[t.type](t,n)}var Ot={Feature:function(t,n){Ht(t.geometry,n)},FeatureCollection:function(t,n){for(var e=t.features,r=-1,i=e.length;++r<i;)Ht(e[r].geometry,n)}},Bt={Sphere:function(t,n){n.sphere()},Point:function(t,n){t=t.coordinates,n.point(t[0],t[1],t[2])},MultiPoint:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)t=e[r],n.point(t[0],t[1],t[2])},LineString:function(t,n){Dt(t.coordinates,n,0)},MultiLineString:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)Dt(e[r],n,0)},Polygon:function(t,n){Wt(t.coordinates,n)},MultiPolygon:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)Wt(e[r],n)},GeometryCollection:function(t,n){for(var e=t.geometries,r=-1,i=e.length;++r<i;)Ht(e[r],n)}};function Dt(t,n,e){var r,i=-1,o=t.length-e;for(n.lineStart();++i<o;)r=t[i],n.point(r[0],r[1],r[2]);n.lineEnd()}function Wt(t,n){var e=-1,r=t.length;for(n.polygonStart();++e<r;)Dt(t[e],n,1);n.polygonEnd()}function Xt(t,n){t&&Ot.hasOwnProperty(t.type)?Ot[t.type](t,n):Ht(t,n)}function Kt(t){return[Pt(t[1],t[0]),Ut(t[2])]}function Zt(t){var n=t[0],e=t[1],r=jt(e);return[r*jt(n),r*It(n),It(e)]}function Yt(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]}function Vt(t,n){return[t[1]*n[2]-t[2]*n[1],t[2]*n[0]-t[0]*n[2],t[0]*n[1]-t[1]*n[0]]}function Jt(t,n){t[0]+=n[0],t[1]+=n[1],t[2]+=n[2]}function Qt(t,n){return[t[0]*n,t[1]*n,t[2]*n]}function tn(t){var n=qt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=n,t[1]/=n,t[2]/=n}function nn(t,n){function e(e,r){return e=t(e,r),n(e[0],e[1])}return t.invert&&n.invert&&(e.invert=function(e,r){return(e=n.invert(e,r))&&t.invert(e[0],e[1])}),e}function en(t,n){return[Ct(t)>Et?t+Math.round(-t/Tt)*Tt:t,n]}function rn(t){return function(n,e){return[(n+=t)>Et?n-Tt:n<-Et?n+Tt:n,e]}}function on(t){var n=rn(t);return n.invert=rn(-t),n}function an(t,n){var e=jt(t),r=It(t),i=jt(n),o=It(n);function a(t,n){var a=jt(n),s=jt(t)*a,l=It(t)*a,u=It(n),c=u*e+s*r;return[Pt(l*i-c*o,s*e-u*r),Ut(c*i+l*o)]}return a.invert=function(t,n){var a=jt(n),s=jt(t)*a,l=It(t)*a,u=It(n),c=u*i-l*o;return[Pt(l*i+u*o,s*e+c*r),Ut(c*e-s*r)]},a}function sn(t,n){(n=Zt(n))[0]-=t,tn(n);var e,r=(e=-n[1])>1?0:e<-1?Et:Math.acos(e);return((-n[2]<0?-r:r)+Tt-St)%Tt}function ln(){var t,n=[];return{point:function(n,e,r){t.push([n,e,r])},lineStart:function(){n.push(t=[])},lineEnd:Gt,rejoin:function(){n.length>1&&n.push(n.pop().concat(n.shift()))},result:function(){var e=n;return n=[],t=null,e}}}function un(t,n){return Ct(t[0]-n[0])<St&&Ct(t[1]-n[1])<St}function cn(t,n,e,r){this.x=t,this.z=n,this.o=e,this.e=r,this.v=!1,this.n=this.p=null}function hn(t,n,e,r,i){var o,a,s=[],l=[];if(t.forEach((function(t){if(!((n=t.length-1)<=0)){var n,e,r=t[0],a=t[n];if(un(r,a)){if(!r[2]&&!a[2]){for(i.lineStart(),o=0;o<n;++o)i.point((r=t[o])[0],r[1]);return void i.lineEnd()}a[0]+=2e-6}s.push(e=new cn(r,t,null,!0)),l.push(e.o=new cn(r,null,e,!1)),s.push(e=new cn(a,t,null,!1)),l.push(e.o=new cn(a,null,e,!0))}})),s.length){for(l.sort(n),fn(s),fn(l),o=0,a=l.length;o<a;++o)l[o].e=e=!e;for(var u,c,h=s[0];;){for(var f=h,d=!0;f.v;)if((f=f.n)===h)return;u=f.z,i.lineStart();do{if(f.v=f.o.v=!0,f.e){if(d)for(o=0,a=u.length;o<a;++o)i.point((c=u[o])[0],c[1]);else r(f.x,f.n.x,1,i);f=f.n}else{if(d)for(u=f.p.z,o=u.length-1;o>=0;--o)i.point((c=u[o])[0],c[1]);else r(f.x,f.p.x,-1,i);f=f.p}u=(f=f.o).z,d=!d}while(!f.v);i.lineEnd()}}}function fn(t){if(n=t.length){for(var n,e,r=0,i=t[0];++r<n;)i.n=e=t[r],e.p=i,i=e;i.n=e=t[0],e.p=i}}function dn(t){return Ct(t[0])<=Et?t[0]:Lt(t[0])*((Ct(t[0])+Et)%Tt-Et)}function pn(t,n,e,r){return function(i){var o,a,s,l=n(i),u=ln(),c=n(u),h=!1,f={point:d,lineStart:g,lineEnd:m,polygonStart:function(){f.point=y,f.lineStart=v,f.lineEnd=w,a=[],o=[]},polygonEnd:function(){f.point=d,f.lineStart=g,f.lineEnd=m,a=kt(a);var t=function(t,n){var e=dn(n),r=n[1],i=It(r),o=[It(e),-jt(e),0],a=0,s=0,l=new xt;1===i?r=Nt+St:-1===i&&(r=-Nt-St);for(var u=0,c=t.length;u<c;++u)if(f=(h=t[u]).length)for(var h,f,d=h[f-1],p=dn(d),g=d[1]/2+At,m=It(g),y=jt(g),v=0;v<f;++v,p=x,m=b,y=M,d=w){var w=h[v],x=dn(w),_=w[1]/2+At,b=It(_),M=jt(_),$=x-p,k=$>=0?1:-1,S=k*$,E=S>Et,N=m*b;if(l.add(Pt(N*k*It(S),y*M+N*jt(S))),a+=E?$+k*Tt:$,E^p>=e^x>=e){var A=Vt(Zt(d),Zt(w));tn(A);var T=Vt(o,A);tn(T);var F=(E^$>=0?-1:1)*Ut(T[2]);(r>F||r===F&&(A[0]||A[1]))&&(s+=E^$>=0?1:-1)}}return(a<-1e-6||a<St&&l<-1e-12)^1&s}(o,r);a.length?(h||(i.polygonStart(),h=!0),hn(a,mn,t,e,i)):t&&(h||(i.polygonStart(),h=!0),i.lineStart(),e(null,null,1,i),i.lineEnd()),h&&(i.polygonEnd(),h=!1),a=o=null},sphere:function(){i.polygonStart(),i.lineStart(),e(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function d(n,e){t(n,e)&&i.point(n,e)}function p(t,n){l.point(t,n)}function g(){f.point=p,l.lineStart()}function m(){f.point=d,l.lineEnd()}function y(t,n){s.push([t,n]),c.point(t,n)}function v(){c.lineStart(),s=[]}function w(){y(s[0][0],s[0][1]),c.lineEnd();var t,n,e,r,l=c.clean(),f=u.result(),d=f.length;if(s.pop(),o.push(s),s=null,d)if(1&l){if((n=(e=f[0]).length-1)>0){for(h||(i.polygonStart(),h=!0),i.lineStart(),t=0;t<n;++t)i.point((r=e[t])[0],r[1]);i.lineEnd()}}else d>1&&2&l&&f.push(f.pop().concat(f.shift())),a.push(f.filter(gn))}return f}}function gn(t){return t.length>1}function mn(t,n){return((t=t.x)[0]<0?t[1]-Nt-St:Nt-t[1])-((n=n.x)[0]<0?n[1]-Nt-St:Nt-n[1])}en.invert=en;var yn=pn((function(){return!0}),(function(t){var n,e=NaN,r=NaN,i=NaN;return{lineStart:function(){t.lineStart(),n=1},point:function(o,a){var s=o>0?Et:-Et,l=Ct(o-e);Ct(l-Et)<St?(t.point(e,r=(r+a)/2>0?Nt:-Nt),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(s,r),t.point(o,r),n=0):i!==s&&l>=Et&&(Ct(e-i)<St&&(e-=i*St),Ct(o-s)<St&&(o-=s*St),r=function(t,n,e,r){var i,o,a=It(t-e);return Ct(a)>St?Rt((It(n)*(o=jt(r))*It(e)-It(r)*(i=jt(n))*It(t))/(i*o*a)):(n+r)/2}(e,r,o,a),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(s,r),n=0),t.point(e=o,r=a),i=s},lineEnd:function(){t.lineEnd(),e=r=NaN},clean:function(){return 2-n}}}),(function(t,n,e,r){var i;if(null==t)i=e*Nt,r.point(-Et,i),r.point(0,i),r.point(Et,i),r.point(Et,0),r.point(Et,-i),r.point(0,-i),r.point(-Et,-i),r.point(-Et,0),r.point(-Et,i);else if(Ct(t[0]-n[0])>St){var o=t[0]<n[0]?Et:-Et;i=e*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(n[0],n[1])}),[-Et,-Nt]);function vn(t){var n=jt(t),e=6*zt,r=n>0,i=Ct(n)>St;function o(t,e){return jt(t)*jt(e)>n}function a(t,e,r){var i=[1,0,0],o=Vt(Zt(t),Zt(e)),a=Yt(o,o),s=o[0],l=a-s*s;if(!l)return!r&&t;var u=n*a/l,c=-n*s/l,h=Vt(i,o),f=Qt(i,u);Jt(f,Qt(o,c));var d=h,p=Yt(f,d),g=Yt(d,d),m=p*p-g*(Yt(f,f)-1);if(!(m<0)){var y=qt(m),v=Qt(d,(-p-y)/g);if(Jt(v,f),v=Kt(v),!r)return v;var w,x=t[0],_=e[0],b=t[1],M=e[1];_<x&&(w=x,x=_,_=w);var $=_-x,k=Ct($-Et)<St;if(!k&&M<b&&(w=b,b=M,M=w),k||$<St?k?b+M>0^v[1]<(Ct(v[0]-x)<St?b:M):b<=v[1]&&v[1]<=M:$>Et^(x<=v[0]&&v[0]<=_)){var S=Qt(d,(-p+y)/g);return Jt(S,f),[v,Kt(S)]}}}function s(n,e){var i=r?t:Et-t,o=0;return n<-i?o|=1:n>i&&(o|=2),e<-i?o|=4:e>i&&(o|=8),o}return pn(o,(function(t){var n,e,l,u,c;return{lineStart:function(){u=l=!1,c=1},point:function(h,f){var d,p=[h,f],g=o(h,f),m=r?g?0:s(h,f):g?s(h+(h<0?Et:-Et),f):0;if(!n&&(u=l=g)&&t.lineStart(),g!==l&&(!(d=a(n,p))||un(n,d)||un(p,d))&&(p[2]=1),g!==l)c=0,g?(t.lineStart(),d=a(p,n),t.point(d[0],d[1])):(d=a(n,p),t.point(d[0],d[1],2),t.lineEnd()),n=d;else if(i&&n&&r^g){var y;m&e||!(y=a(p,n,!0))||(c=0,r?(t.lineStart(),t.point(y[0][0],y[0][1]),t.point(y[1][0],y[1][1]),t.lineEnd()):(t.point(y[1][0],y[1][1]),t.lineEnd(),t.lineStart(),t.point(y[0][0],y[0][1],3)))}!g||n&&un(n,p)||t.point(p[0],p[1]),n=p,l=g,e=m},lineEnd:function(){l&&t.lineEnd(),n=null},clean:function(){return c|(u&&l)<<1}}}),(function(n,r,i,o){!function(t,n,e,r,i,o){if(e){var a=jt(n),s=It(n),l=r*e;null==i?(i=n+r*Tt,o=n-l/2):(i=sn(a,i),o=sn(a,o),(r>0?i<o:i>o)&&(i+=r*Tt));for(var u,c=i;r>0?c>o:c<o;c-=l)u=Kt([a,-s*jt(c),-s*It(c)]),t.point(u[0],u[1])}}(o,t,e,i,n,r)}),r?[0,-t]:[-Et,t-Et])}var wn=1e9,xn=-wn;function _n(t,n,e,r){function i(i,o){return t<=i&&i<=e&&n<=o&&o<=r}function o(i,o,s,u){var c=0,h=0;if(null==i||(c=a(i,s))!==(h=a(o,s))||l(i,o)<0^s>0)do{u.point(0===c||3===c?t:e,c>1?r:n)}while((c=(c+s+4)%4)!==h);else u.point(o[0],o[1])}function a(r,i){return Ct(r[0]-t)<St?i>0?0:3:Ct(r[0]-e)<St?i>0?2:1:Ct(r[1]-n)<St?i>0?1:0:i>0?3:2}function s(t,n){return l(t.x,n.x)}function l(t,n){var e=a(t,1),r=a(n,1);return e!==r?e-r:0===e?n[1]-t[1]:1===e?t[0]-n[0]:2===e?t[1]-n[1]:n[0]-t[0]}return function(a){var l,u,c,h,f,d,p,g,m,y,v,w=a,x=ln(),_={point:b,lineStart:function(){_.point=M,u&&u.push(c=[]);y=!0,m=!1,p=g=NaN},lineEnd:function(){l&&(M(h,f),d&&m&&x.rejoin(),l.push(x.result()));_.point=b,m&&w.lineEnd()},polygonStart:function(){w=x,l=[],u=[],v=!0},polygonEnd:function(){var n=function(){for(var n=0,e=0,i=u.length;e<i;++e)for(var o,a,s=u[e],l=1,c=s.length,h=s[0],f=h[0],d=h[1];l<c;++l)o=f,a=d,f=(h=s[l])[0],d=h[1],a<=r?d>r&&(f-o)*(r-a)>(d-a)*(t-o)&&++n:d<=r&&(f-o)*(r-a)<(d-a)*(t-o)&&--n;return n}(),e=v&&n,i=(l=kt(l)).length;(e||i)&&(a.polygonStart(),e&&(a.lineStart(),o(null,null,1,a),a.lineEnd()),i&&hn(l,s,n,o,a),a.polygonEnd());w=a,l=u=c=null}};function b(t,n){i(t,n)&&w.point(t,n)}function M(o,a){var s=i(o,a);if(u&&c.push([o,a]),y)h=o,f=a,d=s,y=!1,s&&(w.lineStart(),w.point(o,a));else if(s&&m)w.point(o,a);else{var l=[p=Math.max(xn,Math.min(wn,p)),g=Math.max(xn,Math.min(wn,g))],x=[o=Math.max(xn,Math.min(wn,o)),a=Math.max(xn,Math.min(wn,a))];!function(t,n,e,r,i,o){var a,s=t[0],l=t[1],u=0,c=1,h=n[0]-s,f=n[1]-l;if(a=e-s,h||!(a>0)){if(a/=h,h<0){if(a<u)return;a<c&&(c=a)}else if(h>0){if(a>c)return;a>u&&(u=a)}if(a=i-s,h||!(a<0)){if(a/=h,h<0){if(a>c)return;a>u&&(u=a)}else if(h>0){if(a<u)return;a<c&&(c=a)}if(a=r-l,f||!(a>0)){if(a/=f,f<0){if(a<u)return;a<c&&(c=a)}else if(f>0){if(a>c)return;a>u&&(u=a)}if(a=o-l,f||!(a<0)){if(a/=f,f<0){if(a>c)return;a>u&&(u=a)}else if(f>0){if(a<u)return;a<c&&(c=a)}return u>0&&(t[0]=s+u*h,t[1]=l+u*f),c<1&&(n[0]=s+c*h,n[1]=l+c*f),!0}}}}}(l,x,t,n,e,r)?s&&(w.lineStart(),w.point(o,a),v=!1):(m||(w.lineStart(),w.point(l[0],l[1])),w.point(x[0],x[1]),s||w.lineEnd(),v=!1)}p=o,g=a,m=s}return _}}var bn,Mn,$n,kn,Sn=t=>t,En=new xt,Nn=new xt,An={point:Gt,lineStart:Gt,lineEnd:Gt,polygonStart:function(){An.lineStart=Tn,An.lineEnd=Cn},polygonEnd:function(){An.lineStart=An.lineEnd=An.point=Gt,En.add(Ct(Nn)),Nn=new xt},result:function(){var t=En/2;return En=new xt,t}};function Tn(){An.point=Fn}function Fn(t,n){An.point=zn,bn=$n=t,Mn=kn=n}function zn(t,n){Nn.add(kn*t-$n*n),$n=t,kn=n}function Cn(){zn(bn,Mn)}var Rn=An,Pn=1/0,jn=Pn,In=-Pn,Ln=In;var qn,Un,Gn,Hn,On={point:function(t,n){t<Pn&&(Pn=t);t>In&&(In=t);n<jn&&(jn=n);n>Ln&&(Ln=n)},lineStart:Gt,lineEnd:Gt,polygonStart:Gt,polygonEnd:Gt,result:function(){var t=[[Pn,jn],[In,Ln]];return In=Ln=-(jn=Pn=1/0),t}},Bn=0,Dn=0,Wn=0,Xn=0,Kn=0,Zn=0,Yn=0,Vn=0,Jn=0,Qn={point:te,lineStart:ne,lineEnd:ie,polygonStart:function(){Qn.lineStart=oe,Qn.lineEnd=ae},polygonEnd:function(){Qn.point=te,Qn.lineStart=ne,Qn.lineEnd=ie},result:function(){var t=Jn?[Yn/Jn,Vn/Jn]:Zn?[Xn/Zn,Kn/Zn]:Wn?[Bn/Wn,Dn/Wn]:[NaN,NaN];return Bn=Dn=Wn=Xn=Kn=Zn=Yn=Vn=Jn=0,t}};function te(t,n){Bn+=t,Dn+=n,++Wn}function ne(){Qn.point=ee}function ee(t,n){Qn.point=re,te(Gn=t,Hn=n)}function re(t,n){var e=t-Gn,r=n-Hn,i=qt(e*e+r*r);Xn+=i*(Gn+t)/2,Kn+=i*(Hn+n)/2,Zn+=i,te(Gn=t,Hn=n)}function ie(){Qn.point=te}function oe(){Qn.point=se}function ae(){le(qn,Un)}function se(t,n){Qn.point=le,te(qn=Gn=t,Un=Hn=n)}function le(t,n){var e=t-Gn,r=n-Hn,i=qt(e*e+r*r);Xn+=i*(Gn+t)/2,Kn+=i*(Hn+n)/2,Zn+=i,Yn+=(i=Hn*t-Gn*n)*(Gn+t),Vn+=i*(Hn+n),Jn+=3*i,te(Gn=t,Hn=n)}var ue=Qn;function ce(t){this._context=t}ce.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(t,n){switch(this._point){case 0:this._context.moveTo(t,n),this._point=1;break;case 1:this._context.lineTo(t,n);break;default:this._context.moveTo(t+this._radius,n),this._context.arc(t,n,this._radius,0,Tt)}},result:Gt};var he,fe,de,pe,ge,me=new xt,ye={point:Gt,lineStart:function(){ye.point=ve},lineEnd:function(){he&&we(fe,de),ye.point=Gt},polygonStart:function(){he=!0},polygonEnd:function(){he=null},result:function(){var t=+me;return me=new xt,t}};function ve(t,n){ye.point=we,fe=pe=t,de=ge=n}function we(t,n){pe-=t,ge-=n,me.add(qt(pe*pe+ge*ge)),pe=t,ge=n}var xe=ye;function _e(){this._string=[]}function be(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function Me(t){return function(n){var e=new $e;for(var r in t)e[r]=t[r];return e.stream=n,e}}function $e(){}function ke(t,n,e){var r=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),null!=r&&t.clipExtent(null),Xt(e,t.stream(On)),n(On.result()),null!=r&&t.clipExtent(r),t}function Se(t,n,e){return ke(t,(function(e){var r=n[1][0]-n[0][0],i=n[1][1]-n[0][1],o=Math.min(r/(e[1][0]-e[0][0]),i/(e[1][1]-e[0][1])),a=+n[0][0]+(r-o*(e[1][0]+e[0][0]))/2,s=+n[0][1]+(i-o*(e[1][1]+e[0][1]))/2;t.scale(150*o).translate([a,s])}),e)}function Ee(t,n,e){return Se(t,[[0,0],n],e)}function Ne(t,n,e){return ke(t,(function(e){var r=+n,i=r/(e[1][0]-e[0][0]),o=(r-i*(e[1][0]+e[0][0]))/2,a=-i*e[0][1];t.scale(150*i).translate([o,a])}),e)}function Ae(t,n,e){return ke(t,(function(e){var r=+n,i=r/(e[1][1]-e[0][1]),o=-i*e[0][0],a=(r-i*(e[1][1]+e[0][1]))/2;t.scale(150*i).translate([o,a])}),e)}_e.prototype={_radius:4.5,_circle:be(4.5),pointRadius:function(t){return(t=+t)!==this._radius&&(this._radius=t,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(t,n){switch(this._point){case 0:this._string.push("M",t,",",n),this._point=1;break;case 1:this._string.push("L",t,",",n);break;default:null==this._circle&&(this._circle=be(this._radius)),this._string.push("M",t,",",n,this._circle)}},result:function(){if(this._string.length){var t=this._string.join("");return this._string=[],t}return null}},$e.prototype={constructor:$e,point:function(t,n){this.stream.point(t,n)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var Te=jt(30*zt);function Fe(t,n){return+n?function(t,n){function e(r,i,o,a,s,l,u,c,h,f,d,p,g,m){var y=u-r,v=c-i,w=y*y+v*v;if(w>4*n&&g--){var x=a+f,_=s+d,b=l+p,M=qt(x*x+_*_+b*b),$=Ut(b/=M),k=Ct(Ct(b)-1)<St||Ct(o-h)<St?(o+h)/2:Pt(_,x),S=t(k,$),E=S[0],N=S[1],A=E-r,T=N-i,F=v*A-y*T;(F*F/w>n||Ct((y*A+v*T)/w-.5)>.3||a*f+s*d+l*p<Te)&&(e(r,i,o,a,s,l,E,N,k,x/=M,_/=M,b,g,m),m.point(E,N),e(E,N,k,x,_,b,u,c,h,f,d,p,g,m))}}return function(n){var r,i,o,a,s,l,u,c,h,f,d,p,g={point:m,lineStart:y,lineEnd:w,polygonStart:function(){n.polygonStart(),g.lineStart=x},polygonEnd:function(){n.polygonEnd(),g.lineStart=y}};function m(e,r){e=t(e,r),n.point(e[0],e[1])}function y(){c=NaN,g.point=v,n.lineStart()}function v(r,i){var o=Zt([r,i]),a=t(r,i);e(c,h,u,f,d,p,c=a[0],h=a[1],u=r,f=o[0],d=o[1],p=o[2],16,n),n.point(c,h)}function w(){g.point=m,n.lineEnd()}function x(){y(),g.point=_,g.lineEnd=b}function _(t,n){v(r=t,n),i=c,o=h,a=f,s=d,l=p,g.point=v}function b(){e(c,h,u,f,d,p,i,o,r,a,s,l,16,n),g.lineEnd=w,w()}return g}}(t,n):function(t){return Me({point:function(n,e){n=t(n,e),this.stream.point(n[0],n[1])}})}(t)}var ze=Me({point:function(t,n){this.stream.point(t*zt,n*zt)}});function Ce(t,n,e,r,i,o){if(!o)return function(t,n,e,r,i){function o(o,a){return[n+t*(o*=r),e-t*(a*=i)]}return o.invert=function(o,a){return[(o-n)/t*r,(e-a)/t*i]},o}(t,n,e,r,i);var a=jt(o),s=It(o),l=a*t,u=s*t,c=a/t,h=s/t,f=(s*e-a*n)/t,d=(s*n+a*e)/t;function p(t,o){return[l*(t*=r)-u*(o*=i)+n,e-u*t-l*o]}return p.invert=function(t,n){return[r*(c*t-h*n+f),i*(d-h*t-c*n)]},p}function Re(t){var n,e,r,i,o,a,s,l,u,c,h=150,f=480,d=250,p=0,g=0,m=0,y=0,v=0,w=0,x=1,_=1,b=null,M=yn,$=null,k=Sn,S=.5;function E(t){return l(t[0]*zt,t[1]*zt)}function N(t){return(t=l.invert(t[0],t[1]))&&[t[0]*Ft,t[1]*Ft]}function A(){var t=Ce(h,0,0,x,_,w).apply(null,n(p,g)),r=Ce(h,f-t[0],d-t[1],x,_,w);return e=function(t,n,e){return(t%=Tt)?n||e?nn(on(t),an(n,e)):on(t):n||e?an(n,e):en}(m,y,v),s=nn(n,r),l=nn(e,s),a=Fe(s,S),T()}function T(){return u=c=null,E}return E.stream=function(t){return u&&c===t?u:u=ze(function(t){return Me({point:function(n,e){var r=t(n,e);return this.stream.point(r[0],r[1])}})}(e)(M(a(k(c=t)))))},E.preclip=function(t){return arguments.length?(M=t,b=void 0,T()):M},E.postclip=function(t){return arguments.length?(k=t,$=r=i=o=null,T()):k},E.clipAngle=function(t){return arguments.length?(M=+t?vn(b=t*zt):(b=null,yn),T()):b*Ft},E.clipExtent=function(t){return arguments.length?(k=null==t?($=r=i=o=null,Sn):_n($=+t[0][0],r=+t[0][1],i=+t[1][0],o=+t[1][1]),T()):null==$?null:[[$,r],[i,o]]},E.scale=function(t){return arguments.length?(h=+t,A()):h},E.translate=function(t){return arguments.length?(f=+t[0],d=+t[1],A()):[f,d]},E.center=function(t){return arguments.length?(p=t[0]%360*zt,g=t[1]%360*zt,A()):[p*Ft,g*Ft]},E.rotate=function(t){return arguments.length?(m=t[0]%360*zt,y=t[1]%360*zt,v=t.length>2?t[2]%360*zt:0,A()):[m*Ft,y*Ft,v*Ft]},E.angle=function(t){return arguments.length?(w=t%360*zt,A()):w*Ft},E.reflectX=function(t){return arguments.length?(x=t?-1:1,A()):x<0},E.reflectY=function(t){return arguments.length?(_=t?-1:1,A()):_<0},E.precision=function(t){return arguments.length?(a=Fe(s,S=t*t),T()):qt(S)},E.fitExtent=function(t,n){return Se(E,t,n)},E.fitSize=function(t,n){return Ee(E,t,n)},E.fitWidth=function(t,n){return Ne(E,t,n)},E.fitHeight=function(t,n){return Ae(E,t,n)},function(){return n=t.apply(this,arguments),E.invert=n.invert&&N,A()}}function Pe(t,n){var e=It(t),r=(e+It(n))/2;if(Ct(r)<St)return function(t){var n=jt(t);function e(t,e){return[t*n,It(e)/n]}return e.invert=function(t,e){return[t/n,Ut(e*n)]},e}(t);var i=1+e*(2*r-e),o=qt(i)/r;function a(t,n){var e=qt(i-2*r*It(n))/r;return[e*It(t*=r),o-e*jt(t)]}return a.invert=function(t,n){var e=o-n,a=Pt(t,Ct(e))*Lt(e);return e*r<0&&(a-=Et*Lt(t)*Lt(e)),[a/r,Ut((i-(t*t+e*e)*r*r)/(2*r))]},a}function je(){return(t=Pe,n=0,e=Et/3,r=Re(t),i=r(n,e),i.parallels=function(t){return arguments.length?r(n=t[0]*zt,e=t[1]*zt):[n*Ft,e*Ft]},i).scale(155.424).center([0,33.6442]);var t,n,e,r,i}function Ie(){var t,n,e,r,i,o,a=je().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7]),s=je().rotate([154,0]).center([-2,58.5]).parallels([55,65]),l=je().rotate([157,0]).center([-3,19.9]).parallels([8,18]),u={point:function(t,n){o=[t,n]}};function c(t){var n=t[0],a=t[1];return o=null,e.point(n,a),o||(r.point(n,a),o)||(i.point(n,a),o)}function h(){return t=n=null,c}return c.invert=function(t){var n=a.scale(),e=a.translate(),r=(t[0]-e[0])/n,i=(t[1]-e[1])/n;return(i>=.12&&i<.234&&r>=-.425&&r<-.214?s:i>=.166&&i<.234&&r>=-.214&&r<-.115?l:a).invert(t)},c.stream=function(e){return t&&n===e?t:(r=[a.stream(n=e),s.stream(e),l.stream(e)],i=r.length,t={point:function(t,n){for(var e=-1;++e<i;)r[e].point(t,n)},sphere:function(){for(var t=-1;++t<i;)r[t].sphere()},lineStart:function(){for(var t=-1;++t<i;)r[t].lineStart()},lineEnd:function(){for(var t=-1;++t<i;)r[t].lineEnd()},polygonStart:function(){for(var t=-1;++t<i;)r[t].polygonStart()},polygonEnd:function(){for(var t=-1;++t<i;)r[t].polygonEnd()}});var r,i},c.precision=function(t){return arguments.length?(a.precision(t),s.precision(t),l.precision(t),h()):a.precision()},c.scale=function(t){return arguments.length?(a.scale(t),s.scale(.35*t),l.scale(t),c.translate(a.translate())):a.scale()},c.translate=function(t){if(!arguments.length)return a.translate();var n=a.scale(),o=+t[0],c=+t[1];return e=a.translate(t).clipExtent([[o-.455*n,c-.238*n],[o+.455*n,c+.238*n]]).stream(u),r=s.translate([o-.307*n,c+.201*n]).clipExtent([[o-.425*n+St,c+.12*n+St],[o-.214*n-St,c+.234*n-St]]).stream(u),i=l.translate([o-.205*n,c+.212*n]).clipExtent([[o-.214*n+St,c+.166*n+St],[o-.115*n-St,c+.234*n-St]]).stream(u),h()},c.fitExtent=function(t,n){return Se(c,t,n)},c.fitSize=function(t,n){return Ee(c,t,n)},c.fitWidth=function(t,n){return Ne(c,t,n)},c.fitHeight=function(t,n){return Ae(c,t,n)},c.scale(1070)}function Le(t,n){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(n).domain(t)}return this}function qe(t,n){switch(arguments.length){case 0:break;case 1:"function"==typeof t?this.interpolator(t):this.range(t);break;default:this.domain(t),"function"==typeof n?this.interpolator(n):this.range(n)}return this}function Ue(t,n,e){t.prototype=n.prototype=e,e.constructor=t}function Ge(t,n){var e=Object.create(t.prototype);for(var r in n)e[r]=n[r];return e}function He(){}var Oe=.7,Be=1/Oe,De="\\s*([+-]?\\d+)\\s*",We="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Xe="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Ke=/^#([0-9a-f]{3,8})$/,Ze=new RegExp("^rgb\\("+[De,De,De]+"\\)$"),Ye=new RegExp("^rgb\\("+[Xe,Xe,Xe]+"\\)$"),Ve=new RegExp("^rgba\\("+[De,De,De,We]+"\\)$"),Je=new RegExp("^rgba\\("+[Xe,Xe,Xe,We]+"\\)$"),Qe=new RegExp("^hsl\\("+[We,Xe,Xe]+"\\)$"),tr=new RegExp("^hsla\\("+[We,Xe,Xe,We]+"\\)$"),nr={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function er(){return this.rgb().formatHex()}function rr(){return this.rgb().formatRgb()}function ir(t){var n,e;return t=(t+"").trim().toLowerCase(),(n=Ke.exec(t))?(e=n[1].length,n=parseInt(n[1],16),6===e?or(n):3===e?new ur(n>>8&15|n>>4&240,n>>4&15|240&n,(15&n)<<4|15&n,1):8===e?ar(n>>24&255,n>>16&255,n>>8&255,(255&n)/255):4===e?ar(n>>12&15|n>>8&240,n>>8&15|n>>4&240,n>>4&15|240&n,((15&n)<<4|15&n)/255):null):(n=Ze.exec(t))?new ur(n[1],n[2],n[3],1):(n=Ye.exec(t))?new ur(255*n[1]/100,255*n[2]/100,255*n[3]/100,1):(n=Ve.exec(t))?ar(n[1],n[2],n[3],n[4]):(n=Je.exec(t))?ar(255*n[1]/100,255*n[2]/100,255*n[3]/100,n[4]):(n=Qe.exec(t))?dr(n[1],n[2]/100,n[3]/100,1):(n=tr.exec(t))?dr(n[1],n[2]/100,n[3]/100,n[4]):nr.hasOwnProperty(t)?or(nr[t]):"transparent"===t?new ur(NaN,NaN,NaN,0):null}function or(t){return new ur(t>>16&255,t>>8&255,255&t,1)}function ar(t,n,e,r){return r<=0&&(t=n=e=NaN),new ur(t,n,e,r)}function sr(t){return t instanceof He||(t=ir(t)),t?new ur((t=t.rgb()).r,t.g,t.b,t.opacity):new ur}function lr(t,n,e,r){return 1===arguments.length?sr(t):new ur(t,n,e,null==r?1:r)}function ur(t,n,e,r){this.r=+t,this.g=+n,this.b=+e,this.opacity=+r}function cr(){return"#"+fr(this.r)+fr(this.g)+fr(this.b)}function hr(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function fr(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function dr(t,n,e,r){return r<=0?t=n=e=NaN:e<=0||e>=1?t=n=NaN:n<=0&&(t=NaN),new gr(t,n,e,r)}function pr(t){if(t instanceof gr)return new gr(t.h,t.s,t.l,t.opacity);if(t instanceof He||(t=ir(t)),!t)return new gr;if(t instanceof gr)return t;var n=(t=t.rgb()).r/255,e=t.g/255,r=t.b/255,i=Math.min(n,e,r),o=Math.max(n,e,r),a=NaN,s=o-i,l=(o+i)/2;return s?(a=n===o?(e-r)/s+6*(e<r):e===o?(r-n)/s+2:(n-e)/s+4,s/=l<.5?o+i:2-o-i,a*=60):s=l>0&&l<1?0:a,new gr(a,s,l,t.opacity)}function gr(t,n,e,r){this.h=+t,this.s=+n,this.l=+e,this.opacity=+r}function mr(t,n,e){return 255*(t<60?n+(e-n)*t/60:t<180?e:t<240?n+(e-n)*(240-t)/60:n)}Ue(He,ir,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:er,formatHex:er,formatHsl:function(){return pr(this).formatHsl()},formatRgb:rr,toString:rr}),Ue(ur,lr,Ge(He,{brighter:function(t){return t=null==t?Be:Math.pow(Be,t),new ur(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?Oe:Math.pow(Oe,t),new ur(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:cr,formatHex:cr,formatRgb:hr,toString:hr})),Ue(gr,(function(t,n,e,r){return 1===arguments.length?pr(t):new gr(t,n,e,null==r?1:r)}),Ge(He,{brighter:function(t){return t=null==t?Be:Math.pow(Be,t),new gr(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?Oe:Math.pow(Oe,t),new gr(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),n=isNaN(t)||isNaN(this.s)?0:this.s,e=this.l,r=e+(e<.5?e:1-e)*n,i=2*e-r;return new ur(mr(t>=240?t-240:t+120,i,r),mr(t,i,r),mr(t<120?t+240:t-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}}));var yr=t=>()=>t;function vr(t){return 1==(t=+t)?wr:function(n,e){return e-n?function(t,n,e){return t=Math.pow(t,e),n=Math.pow(n,e)-t,e=1/e,function(r){return Math.pow(t+r*n,e)}}(n,e,t):yr(isNaN(n)?e:n)}}function wr(t,n){var e=n-t;return e?function(t,n){return function(e){return t+e*n}}(t,e):yr(isNaN(t)?n:t)}var xr=function t(n){var e=vr(n);function r(t,n){var r=e((t=lr(t)).r,(n=lr(n)).r),i=e(t.g,n.g),o=e(t.b,n.b),a=wr(t.opacity,n.opacity);return function(n){return t.r=r(n),t.g=i(n),t.b=o(n),t.opacity=a(n),t+""}}return r.gamma=t,r}(1);function _r(t,n){n||(n=[]);var e,r=t?Math.min(n.length,t.length):0,i=n.slice();return function(o){for(e=0;e<r;++e)i[e]=t[e]*(1-o)+n[e]*o;return i}}function br(t,n){var e,r=n?n.length:0,i=t?Math.min(r,t.length):0,o=new Array(i),a=new Array(r);for(e=0;e<i;++e)o[e]=Ar(t[e],n[e]);for(;e<r;++e)a[e]=n[e];return function(t){for(e=0;e<i;++e)a[e]=o[e](t);return a}}function Mr(t,n){var e=new Date;return t=+t,n=+n,function(r){return e.setTime(t*(1-r)+n*r),e}}function $r(t,n){return t=+t,n=+n,function(e){return t*(1-e)+n*e}}function kr(t,n){var e,r={},i={};for(e in null!==t&&"object"==typeof t||(t={}),null!==n&&"object"==typeof n||(n={}),n)e in t?r[e]=Ar(t[e],n[e]):i[e]=n[e];return function(t){for(e in r)i[e]=r[e](t);return i}}var Sr=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Er=new RegExp(Sr.source,"g");function Nr(t,n){var e,r,i,o=Sr.lastIndex=Er.lastIndex=0,a=-1,s=[],l=[];for(t+="",n+="";(e=Sr.exec(t))&&(r=Er.exec(n));)(i=r.index)>o&&(i=n.slice(o,i),s[a]?s[a]+=i:s[++a]=i),(e=e[0])===(r=r[0])?s[a]?s[a]+=r:s[++a]=r:(s[++a]=null,l.push({i:a,x:$r(e,r)})),o=Er.lastIndex;return o<n.length&&(i=n.slice(o),s[a]?s[a]+=i:s[++a]=i),s.length<2?l[0]?function(t){return function(n){return t(n)+""}}(l[0].x):function(t){return function(){return t}}(n):(n=l.length,function(t){for(var e,r=0;r<n;++r)s[(e=l[r]).i]=e.x(t);return s.join("")})}function Ar(t,n){var e,r,i=typeof n;return null==n||"boolean"===i?yr(n):("number"===i?$r:"string"===i?(e=ir(n))?(n=e,xr):Nr:n instanceof ir?xr:n instanceof Date?Mr:(r=n,!ArrayBuffer.isView(r)||r instanceof DataView?Array.isArray(n)?br:"function"!=typeof n.valueOf&&"function"!=typeof n.toString||isNaN(n)?kr:$r:_r))(t,n)}function Tr(t,n){return t=+t,n=+n,function(e){return Math.round(t*(1-e)+n*e)}}function Fr(t){return+t}var zr=[0,1];function Cr(t){return t}function Rr(t,n){return(n-=t=+t)?function(e){return(e-t)/n}:(e=isNaN(n)?NaN:.5,function(){return e});var e}function Pr(t,n,e){var r=t[0],i=t[1],o=n[0],a=n[1];return i<r?(r=Rr(i,r),o=e(a,o)):(r=Rr(r,i),o=e(o,a)),function(t){return o(r(t))}}function jr(t,n,e){var r=Math.min(t.length,n.length)-1,i=new Array(r),o=new Array(r),a=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),n=n.slice().reverse());++a<r;)i[a]=Rr(t[a],t[a+1]),o[a]=e(n[a],n[a+1]);return function(n){var e=wt(t,n,1,r)-1;return o[e](i[e](n))}}function Ir(t,n){return n.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Lr(){var t,n,e,r,i,o,a=zr,s=zr,l=Ar,u=Cr;function c(){var t,n,e,l=Math.min(a.length,s.length);return u!==Cr&&(t=a[0],n=a[l-1],t>n&&(e=t,t=n,n=e),u=function(e){return Math.max(t,Math.min(n,e))}),r=l>2?jr:Pr,i=o=null,h}function h(n){return null==n||isNaN(n=+n)?e:(i||(i=r(a.map(t),s,l)))(t(u(n)))}return h.invert=function(e){return u(n((o||(o=r(s,a.map(t),$r)))(e)))},h.domain=function(t){return arguments.length?(a=Array.from(t,Fr),c()):a.slice()},h.range=function(t){return arguments.length?(s=Array.from(t),c()):s.slice()},h.rangeRound=function(t){return s=Array.from(t),l=Tr,c()},h.clamp=function(t){return arguments.length?(u=!!t||Cr,c()):u!==Cr},h.interpolate=function(t){return arguments.length?(l=t,c()):l},h.unknown=function(t){return arguments.length?(e=t,h):e},function(e,r){return t=e,n=r,c()}}function qr(){return Lr()(Cr,Cr)}function Ur(t,n){if((e=(t=n?t.toExponential(n-1):t.toExponential()).indexOf("e"))<0)return null;var e,r=t.slice(0,e);return[r.length>1?r[0]+r.slice(2):r,+t.slice(e+1)]}function Gr(t){return(t=Ur(Math.abs(t)))?t[1]:NaN}var Hr,Or=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Br(t){if(!(n=Or.exec(t)))throw new Error("invalid format: "+t);var n;return new Dr({fill:n[1],align:n[2],sign:n[3],symbol:n[4],zero:n[5],width:n[6],comma:n[7],precision:n[8]&&n[8].slice(1),trim:n[9],type:n[10]})}function Dr(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}function Wr(t,n){var e=Ur(t,n);if(!e)return t+"";var r=e[0],i=e[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}Br.prototype=Dr.prototype,Dr.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var Xr={"%":(t,n)=>(100*t).toFixed(n),b:t=>Math.round(t).toString(2),c:t=>t+"",d:function(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},e:(t,n)=>t.toExponential(n),f:(t,n)=>t.toFixed(n),g:(t,n)=>t.toPrecision(n),o:t=>Math.round(t).toString(8),p:(t,n)=>Wr(100*t,n),r:Wr,s:function(t,n){var e=Ur(t,n);if(!e)return t+"";var r=e[0],i=e[1],o=i-(Hr=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,a=r.length;return o===a?r:o>a?r+new Array(o-a+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+Ur(t,Math.max(0,n+o-1))[0]},X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function Kr(t){return t}var Zr,Yr,Vr,Jr=Array.prototype.map,Qr=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function ti(t){var n,e,r=void 0===t.grouping||void 0===t.thousands?Kr:(n=Jr.call(t.grouping,Number),e=t.thousands+"",function(t,r){for(var i=t.length,o=[],a=0,s=n[0],l=0;i>0&&s>0&&(l+s+1>r&&(s=Math.max(1,r-l)),o.push(t.substring(i-=s,i+s)),!((l+=s+1)>r));)s=n[a=(a+1)%n.length];return o.reverse().join(e)}),i=void 0===t.currency?"":t.currency[0]+"",o=void 0===t.currency?"":t.currency[1]+"",a=void 0===t.decimal?".":t.decimal+"",s=void 0===t.numerals?Kr:function(t){return function(n){return n.replace(/[0-9]/g,(function(n){return t[+n]}))}}(Jr.call(t.numerals,String)),l=void 0===t.percent?"%":t.percent+"",u=void 0===t.minus?"−":t.minus+"",c=void 0===t.nan?"NaN":t.nan+"";function h(t){var n=(t=Br(t)).fill,e=t.align,h=t.sign,f=t.symbol,d=t.zero,p=t.width,g=t.comma,m=t.precision,y=t.trim,v=t.type;"n"===v?(g=!0,v="g"):Xr[v]||(void 0===m&&(m=12),y=!0,v="g"),(d||"0"===n&&"="===e)&&(d=!0,n="0",e="=");var w="$"===f?i:"#"===f&&/[boxX]/.test(v)?"0"+v.toLowerCase():"",x="$"===f?o:/[%p]/.test(v)?l:"",_=Xr[v],b=/[defgprs%]/.test(v);function M(t){var i,o,l,f=w,M=x;if("c"===v)M=_(t)+M,t="";else{var $=(t=+t)<0||1/t<0;if(t=isNaN(t)?c:_(Math.abs(t),m),y&&(t=function(t){t:for(var n,e=t.length,r=1,i=-1;r<e;++r)switch(t[r]){case".":i=n=r;break;case"0":0===i&&(i=r),n=r;break;default:if(!+t[r])break t;i>0&&(i=0)}return i>0?t.slice(0,i)+t.slice(n+1):t}(t)),$&&0==+t&&"+"!==h&&($=!1),f=($?"("===h?h:u:"-"===h||"("===h?"":h)+f,M=("s"===v?Qr[8+Hr/3]:"")+M+($&&"("===h?")":""),b)for(i=-1,o=t.length;++i<o;)if(48>(l=t.charCodeAt(i))||l>57){M=(46===l?a+t.slice(i+1):t.slice(i))+M,t=t.slice(0,i);break}}g&&!d&&(t=r(t,1/0));var k=f.length+t.length+M.length,S=k<p?new Array(p-k+1).join(n):"";switch(g&&d&&(t=r(S+t,S.length?p-M.length:1/0),S=""),e){case"<":t=f+t+M+S;break;case"=":t=f+S+t+M;break;case"^":t=S.slice(0,k=S.length>>1)+f+t+M+S.slice(k);break;default:t=S+f+t+M}return s(t)}return m=void 0===m?6:/[gprs]/.test(v)?Math.max(1,Math.min(21,m)):Math.max(0,Math.min(20,m)),M.toString=function(){return t+""},M}return{format:h,formatPrefix:function(t,n){var e=h(((t=Br(t)).type="f",t)),r=3*Math.max(-8,Math.min(8,Math.floor(Gr(n)/3))),i=Math.pow(10,-r),o=Qr[8+r/3];return function(t){return e(i*t)+o}}}}function ni(t,n,e,r){var i,o=function(t,n,e){var r=Math.abs(n-t)/Math.max(0,e),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),o=r/i;return o>=_t?i*=10:o>=bt?i*=5:o>=Mt&&(i*=2),n<t?-i:i}(t,n,e);switch((r=Br(null==r?",f":r)).type){case"s":var a=Math.max(Math.abs(t),Math.abs(n));return null!=r.precision||isNaN(i=function(t,n){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Gr(n)/3)))-Gr(Math.abs(t)))}(o,a))||(r.precision=i),Vr(r,a);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(i=function(t,n){return t=Math.abs(t),n=Math.abs(n)-t,Math.max(0,Gr(n)-Gr(t))+1}(o,Math.max(Math.abs(t),Math.abs(n))))||(r.precision=i-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(i=function(t){return Math.max(0,-Gr(Math.abs(t)))}(o))||(r.precision=i-2*("%"===r.type))}return Yr(r)}function ei(t){var n=t.domain;return t.ticks=function(t){var e=n();return function(t,n,e){var r,i,o,a,s=-1;if(e=+e,(t=+t)==(n=+n)&&e>0)return[t];if((r=n<t)&&(i=t,t=n,n=i),0===(a=$t(t,n,e))||!isFinite(a))return[];if(a>0){let e=Math.round(t/a),r=Math.round(n/a);for(e*a<t&&++e,r*a>n&&--r,o=new Array(i=r-e+1);++s<i;)o[s]=(e+s)*a}else{a=-a;let e=Math.round(t*a),r=Math.round(n*a);for(e/a<t&&++e,r/a>n&&--r,o=new Array(i=r-e+1);++s<i;)o[s]=(e+s)/a}return r&&o.reverse(),o}(e[0],e[e.length-1],null==t?10:t)},t.tickFormat=function(t,e){var r=n();return ni(r[0],r[r.length-1],null==t?10:t,e)},t.nice=function(e){null==e&&(e=10);var r,i,o=n(),a=0,s=o.length-1,l=o[a],u=o[s],c=10;for(u<l&&(i=l,l=u,u=i,i=a,a=s,s=i);c-- >0;){if((i=$t(l,u,e))===r)return o[a]=l,o[s]=u,n(o);if(i>0)l=Math.floor(l/i)*i,u=Math.ceil(u/i)*i;else{if(!(i<0))break;l=Math.ceil(l*i)/i,u=Math.floor(u*i)/i}r=i}return t},t}function ri(){var t=qr();return t.copy=function(){return Ir(t,ri())},Le.apply(t,arguments),ei(t)}function ii(){var t,n,e,r,i,o=0,a=1,s=Cr,l=!1;function u(n){return null==n||isNaN(n=+n)?i:s(0===e?.5:(n=(r(n)-t)*e,l?Math.max(0,Math.min(1,n)):n))}function c(t){return function(n){var e,r;return arguments.length?([e,r]=n,s=t(e,r),u):[s(0),s(1)]}}return u.domain=function(i){return arguments.length?([o,a]=i,t=r(o=+o),n=r(a=+a),e=t===n?0:1/(n-t),u):[o,a]},u.clamp=function(t){return arguments.length?(l=!!t,u):l},u.interpolator=function(t){return arguments.length?(s=t,u):s},u.range=c(Ar),u.rangeRound=c(Tr),u.unknown=function(t){return arguments.length?(i=t,u):i},function(i){return r=i,t=i(o),n=i(a),e=t===n?0:1/(n-t),u}}function oi(t,n){return n.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function ai(){var t=ei(ii()(Cr));return t.copy=function(){return oi(t,ai())},qe.apply(t,arguments)}Zr=ti({thousands:",",grouping:[3],currency:["$",""]}),Yr=Zr.format,Vr=Zr.formatPrefix;var si={},li={};function ui(t){return new Function("d","return {"+t.map((function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'})).join(",")+"}")}function ci(t){var n=Object.create(null),e=[];return t.forEach((function(t){for(var r in t)r in n||e.push(n[r]=r)})),e}function hi(t,n){var e=t+"",r=e.length;return r<n?new Array(n-r+1).join(0)+e:e}function fi(t){var n,e=t.getUTCHours(),r=t.getUTCMinutes(),i=t.getUTCSeconds(),o=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":((n=t.getUTCFullYear())<0?"-"+hi(-n,6):n>9999?"+"+hi(n,6):hi(n,4))+"-"+hi(t.getUTCMonth()+1,2)+"-"+hi(t.getUTCDate(),2)+(o?"T"+hi(e,2)+":"+hi(r,2)+":"+hi(i,2)+"."+hi(o,3)+"Z":i?"T"+hi(e,2)+":"+hi(r,2)+":"+hi(i,2)+"Z":r||e?"T"+hi(e,2)+":"+hi(r,2)+"Z":"")}var di=function(t){var n=new RegExp('["'+t+"\n\r]"),e=t.charCodeAt(0);function r(t,n){var r,i=[],o=t.length,a=0,s=0,l=o<=0,u=!1;function c(){if(l)return li;if(u)return u=!1,si;var n,r,i=a;if(34===t.charCodeAt(i)){for(;a++<o&&34!==t.charCodeAt(a)||34===t.charCodeAt(++a););return(n=a)>=o?l=!0:10===(r=t.charCodeAt(a++))?u=!0:13===r&&(u=!0,10===t.charCodeAt(a)&&++a),t.slice(i+1,n-1).replace(/""/g,'"')}for(;a<o;){if(10===(r=t.charCodeAt(n=a++)))u=!0;else if(13===r)u=!0,10===t.charCodeAt(a)&&++a;else if(r!==e)continue;return t.slice(i,n)}return l=!0,t.slice(i,o)}for(10===t.charCodeAt(o-1)&&--o,13===t.charCodeAt(o-1)&&--o;(r=c())!==li;){for(var h=[];r!==si&&r!==li;)h.push(r),r=c();n&&null==(h=n(h,s++))||i.push(h)}return i}function i(n,e){return n.map((function(n){return e.map((function(t){return a(n[t])})).join(t)}))}function o(n){return n.map(a).join(t)}function a(t){return null==t?"":t instanceof Date?fi(t):n.test(t+="")?'"'+t.replace(/"/g,'""')+'"':t}return{parse:function(t,n){var e,i,o=r(t,(function(t,r){if(e)return e(t,r-1);i=t,e=n?function(t,n){var e=ui(t);return function(r,i){return n(e(r),i,t)}}(t,n):ui(t)}));return o.columns=i||[],o},parseRows:r,format:function(n,e){return null==e&&(e=ci(n)),[e.map(a).join(t)].concat(i(n,e)).join("\n")},formatBody:function(t,n){return null==n&&(n=ci(t)),i(t,n).join("\n")},formatRows:function(t){return t.map(o).join("\n")},formatRow:o,formatValue:a}}(","),pi=di.parse;function gi(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.text()}function mi(t,n){return fetch(t,n).then(gi)}var yi,vi=(yi=pi,function(t,n,e){return 2===arguments.length&&"function"==typeof n&&(e=n,n=void 0),mi(t,n).then((function(t){return yi(t,e)}))});function wi(t){let n,e;return n=new ht({props:{render:t[0]}}),{c(){W(n.$$.fragment)},m(t,r){X(n,t,r),e=!0},p(t,[e]){const r={};1&e&&(r.render=t[0]),n.$set(r)},i(t){e||(O(n.$$.fragment,t),e=!0)},o(t){B(n.$$.fragment,t),e=!1},d(t){K(n,t)}}}let xi="Donated ",_i=" in 2022";function bi(t,n,e){let r,{x:i=0,y:o=0,r:a=1,stroke:s=null,change:l,name:u,state:c,amount:h,reference_year:f}=n,d=ai(function(t,n){void 0===n&&(n=t,t=Ar);for(var e=0,r=n.length-1,i=n[0],o=new Array(r<0?0:r);e<r;)o[e]=t(i,i=n[++e]);return function(t){var n=Math.max(0,Math.min(r-1,Math.floor(t*=r)));return o[n](t-n)}}(Ar,["#d73027","#ffffbf","#4575b4"])).domain([-1e4,1e4]),p=u+", "+c,g=l>0?"↑$"+Math.abs(Math.trunc(l)).toLocaleString("en-US"):l<0?"↓$"+Math.abs(Math.trunc(l)).toLocaleString("en-US"):"→$0 ",m="$"+Math.abs(Math.trunc(h)).toLocaleString("en-US")+"  ",y=d(l);return t.$$set=t=>{"x"in t&&e(1,i=t.x),"y"in t&&e(2,o=t.y),"r"in t&&e(3,a=t.r),"stroke"in t&&e(4,s=t.stroke),"change"in t&&e(5,l=t.change),"name"in t&&e(6,u=t.name),"state"in t&&e(7,c=t.state),"amount"in t&&e(8,h=t.amount),"reference_year"in t&&e(9,f=t.reference_year)},t.$$.update=()=>{542&t.$$.dirty&&e(0,r=({context:t})=>{if(t.save(),t.globalAlpha=.9,t.fillStyle=y,t.strokeStyle="#000",t.lineWidth=1,t.beginPath(),t.arc(i,o,a,0,2*Math.PI),t.stroke(),t.fill(),t.restore(),s){t.font="15px Aktiv Grotesk",t.fillStyle="rgba(1, 1, 1, 0)",t.fillText("Donated  in 2022",i+30,o+70),t.font="15px Aktiv Grotesk XBold",t.fillStyle="rgba(1, 1, 1, 0)",t.fillText(m,i+30,o+70);var n=t.measureText(xi+m+_i).width;t.font="15px Aktiv Grotesk",t.fillStyle="rgba(1, 1, 1, 0)",t.fillText(g,i+30,o+100);var e=t.measureText(g).width;t.font="15px Aktiv Grotesk",t.fillStyle="rgba(1, 1, 1, 0)",t.fillText(" compared to 2020",i+30+t.measureText(g).width,o+100);var r=t.measureText(" compared to "+f).width;t.font="20px Aktiv Grotesk XBold",t.fillStyle="rgba(1, 1, 1, 0)",t.fillText(p,i+30,o+30);var l=t.measureText(p).width,u=document.querySelector("Canvas").getBoundingClientRect().right-10,c=document.querySelector("Canvas").getBoundingClientRect().bottom-115,h=l>=e+r?l+30:e+r+30,d=i+15+(h=h-30>n?h:n+30)>u?i-15-h:i+15,v=o+120>c?o-120:o;t.beginPath(),t.roundRect(d,v,h,120,10),t.strokeStyle="#FFFFFF",t.fillStyle="rgba(153, 153, 153, 0.9)",t.stroke(),t.fill(),t.strokeStyle=s,t.lineWidth=2,t.beginPath(),t.arc(i,o,a,0,2*Math.PI),t.stroke(),t.font="15px Aktiv Grotesk",t.fillStyle="#FFFFFF",t.fillText(xi,d+15,v+70),t.font="15px Aktiv Grotesk XBold",t.fillStyle="#FFFFFF",t.fillText(m,d+15+t.measureText(xi).width,v+70),t.font="15px Aktiv Grotesk",t.fillStyle="#FFFFFF",t.fillText(_i,d+15+t.measureText(xi).width+t.measureText(m).width,v+70),t.font="15px Aktiv Grotesk XBold",t.fillStyle=y,t.fillText(g,d+15,v+100),t.font="15px Aktiv Grotesk",t.fillStyle="#FFFFFF",t.fillText(" compared to "+f,d+15+t.measureText(g).width,v+100),t.font="20px Aktiv Grotesk XBold",t.fillStyle="#FFFFFF",t.fillText(p,d+15,v+30)}})},[r,i,o,a,s,l,u,c,h,f]}class Mi extends V{constructor(t){super(),Y(this,t,bi,wi,o,{x:1,y:2,r:3,stroke:4,change:5,name:6,state:7,amount:8,reference_year:9})}}const $i=134217729;function ki(t,n,e,r,i){let o,a,s,l,u=n[0],c=r[0],h=0,f=0;c>u==c>-u?(o=u,u=n[++h]):(o=c,c=r[++f]);let d=0;if(h<t&&f<e)for(c>u==c>-u?(a=u+o,s=o-(a-u),u=n[++h]):(a=c+o,s=o-(a-c),c=r[++f]),o=a,0!==s&&(i[d++]=s);h<t&&f<e;)c>u==c>-u?(a=o+u,l=a-o,s=o-(a-l)+(u-l),u=n[++h]):(a=o+c,l=a-o,s=o-(a-l)+(c-l),c=r[++f]),o=a,0!==s&&(i[d++]=s);for(;h<t;)a=o+u,l=a-o,s=o-(a-l)+(u-l),u=n[++h],o=a,0!==s&&(i[d++]=s);for(;f<e;)a=o+c,l=a-o,s=o-(a-l)+(c-l),c=r[++f],o=a,0!==s&&(i[d++]=s);return 0===o&&0!==d||(i[d++]=o),d}function Si(t){return new Float64Array(t)}const Ei=Si(4),Ni=Si(8),Ai=Si(12),Ti=Si(16),Fi=Si(4);function zi(t,n,e,r,i,o){const a=(n-o)*(e-i),s=(t-i)*(r-o),l=a-s;if(0===a||0===s||a>0!=s>0)return l;const u=Math.abs(a+s);return Math.abs(l)>=33306690738754716e-32*u?l:-function(t,n,e,r,i,o,a){let s,l,u,c,h,f,d,p,g,m,y,v,w,x,_,b,M,$;const k=t-i,S=e-i,E=n-o,N=r-o;x=k*N,f=$i*k,d=f-(f-k),p=k-d,f=$i*N,g=f-(f-N),m=N-g,_=p*m-(x-d*g-p*g-d*m),b=E*S,f=$i*E,d=f-(f-E),p=E-d,f=$i*S,g=f-(f-S),m=S-g,M=p*m-(b-d*g-p*g-d*m),y=_-M,h=_-y,Ei[0]=_-(y+h)+(h-M),v=x+y,h=v-x,w=x-(v-h)+(y-h),y=w-b,h=w-y,Ei[1]=w-(y+h)+(h-b),$=v+y,h=$-v,Ei[2]=v-($-h)+(y-h),Ei[3]=$;let A=function(t,n){let e=n[0];for(let r=1;r<t;r++)e+=n[r];return e}(4,Ei),T=22204460492503146e-32*a;if(A>=T||-A>=T)return A;if(h=t-k,s=t-(k+h)+(h-i),h=e-S,u=e-(S+h)+(h-i),h=n-E,l=n-(E+h)+(h-o),h=r-N,c=r-(N+h)+(h-o),0===s&&0===l&&0===u&&0===c)return A;if(T=11093356479670487e-47*a+33306690738754706e-32*Math.abs(A),A+=k*c+N*s-(E*u+S*l),A>=T||-A>=T)return A;x=s*N,f=$i*s,d=f-(f-s),p=s-d,f=$i*N,g=f-(f-N),m=N-g,_=p*m-(x-d*g-p*g-d*m),b=l*S,f=$i*l,d=f-(f-l),p=l-d,f=$i*S,g=f-(f-S),m=S-g,M=p*m-(b-d*g-p*g-d*m),y=_-M,h=_-y,Fi[0]=_-(y+h)+(h-M),v=x+y,h=v-x,w=x-(v-h)+(y-h),y=w-b,h=w-y,Fi[1]=w-(y+h)+(h-b),$=v+y,h=$-v,Fi[2]=v-($-h)+(y-h),Fi[3]=$;const F=ki(4,Ei,4,Fi,Ni);x=k*c,f=$i*k,d=f-(f-k),p=k-d,f=$i*c,g=f-(f-c),m=c-g,_=p*m-(x-d*g-p*g-d*m),b=E*u,f=$i*E,d=f-(f-E),p=E-d,f=$i*u,g=f-(f-u),m=u-g,M=p*m-(b-d*g-p*g-d*m),y=_-M,h=_-y,Fi[0]=_-(y+h)+(h-M),v=x+y,h=v-x,w=x-(v-h)+(y-h),y=w-b,h=w-y,Fi[1]=w-(y+h)+(h-b),$=v+y,h=$-v,Fi[2]=v-($-h)+(y-h),Fi[3]=$;const z=ki(F,Ni,4,Fi,Ai);x=s*c,f=$i*s,d=f-(f-s),p=s-d,f=$i*c,g=f-(f-c),m=c-g,_=p*m-(x-d*g-p*g-d*m),b=l*u,f=$i*l,d=f-(f-l),p=l-d,f=$i*u,g=f-(f-u),m=u-g,M=p*m-(b-d*g-p*g-d*m),y=_-M,h=_-y,Fi[0]=_-(y+h)+(h-M),v=x+y,h=v-x,w=x-(v-h)+(y-h),y=w-b,h=w-y,Fi[1]=w-(y+h)+(h-b),$=v+y,h=$-v,Fi[2]=v-($-h)+(y-h),Fi[3]=$;const C=ki(z,Ai,4,Fi,Ti);return Ti[C-1]}(t,n,e,r,i,o,u)}const Ci=Math.pow(2,-52),Ri=new Uint32Array(512);class Pi{static from(t,n=Gi,e=Hi){const r=t.length,i=new Float64Array(2*r);for(let o=0;o<r;o++){const r=t[o];i[2*o]=n(r),i[2*o+1]=e(r)}return new Pi(i)}constructor(t){const n=t.length>>1;if(n>0&&"number"!=typeof t[0])throw new Error("Expected coords to contain numbers.");this.coords=t;const e=Math.max(2*n-5,0);this._triangles=new Uint32Array(3*e),this._halfedges=new Int32Array(3*e),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize).fill(-1),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:t,_hullPrev:n,_hullNext:e,_hullTri:r,_hullHash:i}=this,o=t.length>>1;let a=1/0,s=1/0,l=-1/0,u=-1/0;for(let n=0;n<o;n++){const e=t[2*n],r=t[2*n+1];e<a&&(a=e),r<s&&(s=r),e>l&&(l=e),r>u&&(u=r),this._ids[n]=n}const c=(a+l)/2,h=(s+u)/2;let f,d,p,g=1/0;for(let n=0;n<o;n++){const e=ji(c,h,t[2*n],t[2*n+1]);e<g&&(f=n,g=e)}const m=t[2*f],y=t[2*f+1];g=1/0;for(let n=0;n<o;n++){if(n===f)continue;const e=ji(m,y,t[2*n],t[2*n+1]);e<g&&e>0&&(d=n,g=e)}let v=t[2*d],w=t[2*d+1],x=1/0;for(let n=0;n<o;n++){if(n===f||n===d)continue;const e=Li(m,y,v,w,t[2*n],t[2*n+1]);e<x&&(p=n,x=e)}let _=t[2*p],b=t[2*p+1];if(x===1/0){for(let n=0;n<o;n++)this._dists[n]=t[2*n]-t[0]||t[2*n+1]-t[1];qi(this._ids,this._dists,0,o-1);const n=new Uint32Array(o);let e=0;for(let t=0,r=-1/0;t<o;t++){const i=this._ids[t];this._dists[i]>r&&(n[e++]=i,r=this._dists[i])}return this.hull=n.subarray(0,e),this.triangles=new Uint32Array(0),void(this.halfedges=new Uint32Array(0))}if(zi(m,y,v,w,_,b)<0){const t=d,n=v,e=w;d=p,v=_,w=b,p=t,_=n,b=e}const M=function(t,n,e,r,i,o){const a=e-t,s=r-n,l=i-t,u=o-n,c=a*a+s*s,h=l*l+u*u,f=.5/(a*u-s*l);return{x:t+(u*c-s*h)*f,y:n+(a*h-l*c)*f}}(m,y,v,w,_,b);this._cx=M.x,this._cy=M.y;for(let n=0;n<o;n++)this._dists[n]=ji(t[2*n],t[2*n+1],M.x,M.y);qi(this._ids,this._dists,0,o-1),this._hullStart=f;let $=3;e[f]=n[p]=d,e[d]=n[f]=p,e[p]=n[d]=f,r[f]=0,r[d]=1,r[p]=2,i.fill(-1),i[this._hashKey(m,y)]=f,i[this._hashKey(v,w)]=d,i[this._hashKey(_,b)]=p,this.trianglesLen=0,this._addTriangle(f,d,p,-1,-1,-1);for(let o,a,s=0;s<this._ids.length;s++){const l=this._ids[s],u=t[2*l],c=t[2*l+1];if(s>0&&Math.abs(u-o)<=Ci&&Math.abs(c-a)<=Ci)continue;if(o=u,a=c,l===f||l===d||l===p)continue;let h=0;for(let t=0,n=this._hashKey(u,c);t<this._hashSize&&(h=i[(n+t)%this._hashSize],-1===h||h===e[h]);t++);h=n[h];let g,m=h;for(;g=e[m],zi(u,c,t[2*m],t[2*m+1],t[2*g],t[2*g+1])>=0;)if(m=g,m===h){m=-1;break}if(-1===m)continue;let y=this._addTriangle(m,l,e[m],-1,-1,r[m]);r[l]=this._legalize(y+2),r[m]=y,$++;let v=e[m];for(;g=e[v],zi(u,c,t[2*v],t[2*v+1],t[2*g],t[2*g+1])<0;)y=this._addTriangle(v,l,g,r[l],-1,r[v]),r[l]=this._legalize(y+2),e[v]=v,$--,v=g;if(m===h)for(;g=n[m],zi(u,c,t[2*g],t[2*g+1],t[2*m],t[2*m+1])<0;)y=this._addTriangle(g,l,m,-1,r[m],r[g]),this._legalize(y+2),r[g]=y,e[m]=m,$--,m=g;this._hullStart=n[l]=m,e[m]=n[v]=l,e[l]=v,i[this._hashKey(u,c)]=l,i[this._hashKey(t[2*m],t[2*m+1])]=m}this.hull=new Uint32Array($);for(let t=0,n=this._hullStart;t<$;t++)this.hull[t]=n,n=e[n];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,n){return Math.floor(function(t,n){const e=t/(Math.abs(t)+Math.abs(n));return(n>0?3-e:1+e)/4}(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:n,_halfedges:e,coords:r}=this;let i=0,o=0;for(;;){const a=e[t],s=t-t%3;if(o=s+(t+2)%3,-1===a){if(0===i)break;t=Ri[--i];continue}const l=a-a%3,u=s+(t+1)%3,c=l+(a+2)%3,h=n[o],f=n[t],d=n[u],p=n[c];if(Ii(r[2*h],r[2*h+1],r[2*f],r[2*f+1],r[2*d],r[2*d+1],r[2*p],r[2*p+1])){n[t]=p,n[a]=h;const r=e[c];if(-1===r){let n=this._hullStart;do{if(this._hullTri[n]===c){this._hullTri[n]=t;break}n=this._hullPrev[n]}while(n!==this._hullStart)}this._link(t,r),this._link(a,e[o]),this._link(o,c);const s=l+(a+1)%3;i<Ri.length&&(Ri[i++]=s)}else{if(0===i)break;t=Ri[--i]}}return o}_link(t,n){this._halfedges[t]=n,-1!==n&&(this._halfedges[n]=t)}_addTriangle(t,n,e,r,i,o){const a=this.trianglesLen;return this._triangles[a]=t,this._triangles[a+1]=n,this._triangles[a+2]=e,this._link(a,r),this._link(a+1,i),this._link(a+2,o),this.trianglesLen+=3,a}}function ji(t,n,e,r){const i=t-e,o=n-r;return i*i+o*o}function Ii(t,n,e,r,i,o,a,s){const l=t-a,u=n-s,c=e-a,h=r-s,f=i-a,d=o-s,p=c*c+h*h,g=f*f+d*d;return l*(h*g-p*d)-u*(c*g-p*f)+(l*l+u*u)*(c*d-h*f)<0}function Li(t,n,e,r,i,o){const a=e-t,s=r-n,l=i-t,u=o-n,c=a*a+s*s,h=l*l+u*u,f=.5/(a*u-s*l),d=(u*c-s*h)*f,p=(a*h-l*c)*f;return d*d+p*p}function qi(t,n,e,r){if(r-e<=20)for(let i=e+1;i<=r;i++){const r=t[i],o=n[r];let a=i-1;for(;a>=e&&n[t[a]]>o;)t[a+1]=t[a--];t[a+1]=r}else{let i=e+1,o=r;Ui(t,e+r>>1,i),n[t[e]]>n[t[r]]&&Ui(t,e,r),n[t[i]]>n[t[r]]&&Ui(t,i,r),n[t[e]]>n[t[i]]&&Ui(t,e,i);const a=t[i],s=n[a];for(;;){do{i++}while(n[t[i]]<s);do{o--}while(n[t[o]]>s);if(o<i)break;Ui(t,i,o)}t[e+1]=t[o],t[o]=a,r-i+1>=o-e?(qi(t,n,i,r),qi(t,n,e,o-1)):(qi(t,n,e,o-1),qi(t,n,i,r))}}function Ui(t,n,e){const r=t[n];t[n]=t[e],t[e]=r}function Gi(t){return t[0]}function Hi(t){return t[1]}const Oi=1e-6;class Bi{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,n){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,n){this._+=`L${this._x1=+t},${this._y1=+n}`}arc(t,n,e){const r=(t=+t)+(e=+e),i=n=+n;if(e<0)throw new Error("negative radius");null===this._x1?this._+=`M${r},${i}`:(Math.abs(this._x1-r)>Oi||Math.abs(this._y1-i)>Oi)&&(this._+="L"+r+","+i),e&&(this._+=`A${e},${e},0,1,1,${t-e},${n}A${e},${e},0,1,1,${this._x1=r},${this._y1=i}`)}rect(t,n,e,r){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${+e}v${+r}h${-e}Z`}value(){return this._||null}}class Di{constructor(){this._=[]}moveTo(t,n){this._.push([t,n])}closePath(){this._.push(this._[0].slice())}lineTo(t,n){this._.push([t,n])}value(){return this._.length?this._:null}}class Wi{constructor(t,[n,e,r,i]=[0,0,960,500]){if(!((r=+r)>=(n=+n)&&(i=+i)>=(e=+e)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(2*t.points.length),this.vectors=new Float64Array(2*t.points.length),this.xmax=r,this.xmin=n,this.ymax=i,this.ymin=e,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:n,triangles:e},vectors:r}=this,i=this.circumcenters=this._circumcenters.subarray(0,e.length/3*2);for(let n,r,o=0,a=0,s=e.length;o<s;o+=3,a+=2){const s=2*e[o],l=2*e[o+1],u=2*e[o+2],c=t[s],h=t[s+1],f=t[l],d=t[l+1],p=t[u],g=t[u+1],m=f-c,y=d-h,v=p-c,w=g-h,x=2*(m*w-y*v);if(Math.abs(x)<1e-9){let i=1e9;const o=2*e[0];i*=Math.sign((t[o]-c)*w-(t[o+1]-h)*v),n=(c+p)/2-i*w,r=(h+g)/2+i*v}else{const t=1/x,e=m*m+y*y,i=v*v+w*w;n=c+(w*e-y*i)*t,r=h+(m*i-v*e)*t}i[a]=n,i[a+1]=r}let o,a,s,l=n[n.length-1],u=4*l,c=t[2*l],h=t[2*l+1];r.fill(0);for(let e=0;e<n.length;++e)l=n[e],o=u,a=c,s=h,u=4*l,c=t[2*l],h=t[2*l+1],r[o+2]=r[u]=s-h,r[o+3]=r[u+1]=c-a}render(t){const n=null==t?t=new Bi:void 0,{delaunay:{halfedges:e,inedges:r,hull:i},circumcenters:o,vectors:a}=this;if(i.length<=1)return null;for(let n=0,r=e.length;n<r;++n){const r=e[n];if(r<n)continue;const i=2*Math.floor(n/3),a=2*Math.floor(r/3),s=o[i],l=o[i+1],u=o[a],c=o[a+1];this._renderSegment(s,l,u,c,t)}let s,l=i[i.length-1];for(let n=0;n<i.length;++n){s=l,l=i[n];const e=2*Math.floor(r[l]/3),u=o[e],c=o[e+1],h=4*s,f=this._project(u,c,a[h+2],a[h+3]);f&&this._renderSegment(u,c,f[0],f[1],t)}return n&&n.value()}renderBounds(t){const n=null==t?t=new Bi:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(t,n){const e=null==n?n=new Bi:void 0,r=this._clip(t);if(null===r||!r.length)return;n.moveTo(r[0],r[1]);let i=r.length;for(;r[0]===r[i-2]&&r[1]===r[i-1]&&i>1;)i-=2;for(let t=2;t<i;t+=2)r[t]===r[t-2]&&r[t+1]===r[t-1]||n.lineTo(r[t],r[t+1]);return n.closePath(),e&&e.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let n=0,e=t.length/2;n<e;++n){const t=this.cellPolygon(n);t&&(t.index=n,yield t)}}cellPolygon(t){const n=new Di;return this.renderCell(t,n),n.value()}_renderSegment(t,n,e,r,i){let o;const a=this._regioncode(t,n),s=this._regioncode(e,r);0===a&&0===s?(i.moveTo(t,n),i.lineTo(e,r)):(o=this._clipSegment(t,n,e,r,a,s))&&(i.moveTo(o[0],o[1]),i.lineTo(o[2],o[3]))}contains(t,n,e){return(n=+n)==n&&(e=+e)==e&&this.delaunay._step(t,n,e)===t}*neighbors(t){const n=this._clip(t);if(n)for(const e of this.delaunay.neighbors(t)){const t=this._clip(e);if(t)t:for(let r=0,i=n.length;r<i;r+=2)for(let o=0,a=t.length;o<a;o+=2)if(n[r]==t[o]&&n[r+1]==t[o+1]&&n[(r+2)%i]==t[(o+a-2)%a]&&n[(r+3)%i]==t[(o+a-1)%a]){yield e;break t}}}_cell(t){const{circumcenters:n,delaunay:{inedges:e,halfedges:r,triangles:i}}=this,o=e[t];if(-1===o)return null;const a=[];let s=o;do{const e=Math.floor(s/3);if(a.push(n[2*e],n[2*e+1]),s=s%3==2?s-2:s+1,i[s]!==t)break;s=r[s]}while(s!==o&&-1!==s);return a}_clip(t){if(0===t&&1===this.delaunay.hull.length)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const n=this._cell(t);if(null===n)return null;const{vectors:e}=this,r=4*t;return e[r]||e[r+1]?this._clipInfinite(t,n,e[r],e[r+1],e[r+2],e[r+3]):this._clipFinite(t,n)}_clipFinite(t,n){const e=n.length;let r,i,o,a,s=null,l=n[e-2],u=n[e-1],c=this._regioncode(l,u),h=0;for(let f=0;f<e;f+=2)if(r=l,i=u,l=n[f],u=n[f+1],o=c,c=this._regioncode(l,u),0===o&&0===c)a=h,h=0,s?s.push(l,u):s=[l,u];else{let n,e,f,d,p;if(0===o){if(null===(n=this._clipSegment(r,i,l,u,o,c)))continue;[e,f,d,p]=n}else{if(null===(n=this._clipSegment(l,u,r,i,c,o)))continue;[d,p,e,f]=n,a=h,h=this._edgecode(e,f),a&&h&&this._edge(t,a,h,s,s.length),s?s.push(e,f):s=[e,f]}a=h,h=this._edgecode(d,p),a&&h&&this._edge(t,a,h,s,s.length),s?s.push(d,p):s=[d,p]}if(s)a=h,h=this._edgecode(s[0],s[1]),a&&h&&this._edge(t,a,h,s,s.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return s}_clipSegment(t,n,e,r,i,o){for(;;){if(0===i&&0===o)return[t,n,e,r];if(i&o)return null;let a,s,l=i||o;8&l?(a=t+(e-t)*(this.ymax-n)/(r-n),s=this.ymax):4&l?(a=t+(e-t)*(this.ymin-n)/(r-n),s=this.ymin):2&l?(s=n+(r-n)*(this.xmax-t)/(e-t),a=this.xmax):(s=n+(r-n)*(this.xmin-t)/(e-t),a=this.xmin),i?(t=a,n=s,i=this._regioncode(t,n)):(e=a,r=s,o=this._regioncode(e,r))}}_clipInfinite(t,n,e,r,i,o){let a,s=Array.from(n);if((a=this._project(s[0],s[1],e,r))&&s.unshift(a[0],a[1]),(a=this._project(s[s.length-2],s[s.length-1],i,o))&&s.push(a[0],a[1]),s=this._clipFinite(t,s))for(let n,e=0,r=s.length,i=this._edgecode(s[r-2],s[r-1]);e<r;e+=2)n=i,i=this._edgecode(s[e],s[e+1]),n&&i&&(e=this._edge(t,n,i,s,e),r=s.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(s=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return s}_edge(t,n,e,r,i){for(;n!==e;){let e,o;switch(n){case 5:n=4;continue;case 4:n=6,e=this.xmax,o=this.ymin;break;case 6:n=2;continue;case 2:n=10,e=this.xmax,o=this.ymax;break;case 10:n=8;continue;case 8:n=9,e=this.xmin,o=this.ymax;break;case 9:n=1;continue;case 1:n=5,e=this.xmin,o=this.ymin}r[i]===e&&r[i+1]===o||!this.contains(t,e,o)||(r.splice(i,0,e,o),i+=2)}if(r.length>4)for(let t=0;t<r.length;t+=2){const n=(t+2)%r.length,e=(t+4)%r.length;(r[t]===r[n]&&r[n]===r[e]||r[t+1]===r[n+1]&&r[n+1]===r[e+1])&&(r.splice(n,2),t-=2)}return i}_project(t,n,e,r){let i,o,a,s=1/0;if(r<0){if(n<=this.ymin)return null;(i=(this.ymin-n)/r)<s&&(a=this.ymin,o=t+(s=i)*e)}else if(r>0){if(n>=this.ymax)return null;(i=(this.ymax-n)/r)<s&&(a=this.ymax,o=t+(s=i)*e)}if(e>0){if(t>=this.xmax)return null;(i=(this.xmax-t)/e)<s&&(o=this.xmax,a=n+(s=i)*r)}else if(e<0){if(t<=this.xmin)return null;(i=(this.xmin-t)/e)<s&&(o=this.xmin,a=n+(s=i)*r)}return[o,a]}_edgecode(t,n){return(t===this.xmin?1:t===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(t,n){return(t<this.xmin?1:t>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}}const Xi=2*Math.PI,Ki=Math.pow;function Zi(t){return t[0]}function Yi(t){return t[1]}function Vi(t,n,e){return[t+Math.sin(t+n)*e,n+Math.cos(t-n)*e]}class Ji{static from(t,n=Zi,e=Yi,r){return new Ji("length"in t?function(t,n,e,r){const i=t.length,o=new Float64Array(2*i);for(let a=0;a<i;++a){const i=t[a];o[2*a]=n.call(r,i,a,t),o[2*a+1]=e.call(r,i,a,t)}return o}(t,n,e,r):Float64Array.from(function*(t,n,e,r){let i=0;for(const o of t)yield n.call(r,o,i,t),yield e.call(r,o,i,t),++i}(t,n,e,r)))}constructor(t){this._delaunator=new Pi(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,n=this.points;if(t.hull&&t.hull.length>2&&function(t){const{triangles:n,coords:e}=t;for(let t=0;t<n.length;t+=3){const r=2*n[t],i=2*n[t+1],o=2*n[t+2];if((e[o]-e[r])*(e[i+1]-e[r+1])-(e[i]-e[r])*(e[o+1]-e[r+1])>1e-10)return!1}return!0}(t)){this.collinear=Int32Array.from({length:n.length/2},((t,n)=>n)).sort(((t,e)=>n[2*t]-n[2*e]||n[2*t+1]-n[2*e+1]));const t=this.collinear[0],e=this.collinear[this.collinear.length-1],r=[n[2*t],n[2*t+1],n[2*e],n[2*e+1]],i=1e-8*Math.hypot(r[3]-r[1],r[2]-r[0]);for(let t=0,e=n.length/2;t<e;++t){const e=Vi(n[2*t],n[2*t+1],i);n[2*t]=e[0],n[2*t+1]=e[1]}this._delaunator=new Pi(n)}else delete this.collinear;const e=this.halfedges=this._delaunator.halfedges,r=this.hull=this._delaunator.hull,i=this.triangles=this._delaunator.triangles,o=this.inedges.fill(-1),a=this._hullIndex.fill(-1);for(let t=0,n=e.length;t<n;++t){const n=i[t%3==2?t-2:t+1];-1!==e[t]&&-1!==o[n]||(o[n]=t)}for(let t=0,n=r.length;t<n;++t)a[r[t]]=t;r.length<=2&&r.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=r[0],o[r[0]]=1,2===r.length&&(o[r[1]]=0,this.triangles[1]=r[1],this.triangles[2]=r[1]))}voronoi(t){return new Wi(this,t)}*neighbors(t){const{inedges:n,hull:e,_hullIndex:r,halfedges:i,triangles:o,collinear:a}=this;if(a){const n=a.indexOf(t);return n>0&&(yield a[n-1]),void(n<a.length-1&&(yield a[n+1]))}const s=n[t];if(-1===s)return;let l=s,u=-1;do{if(yield u=o[l],l=l%3==2?l-2:l+1,o[l]!==t)return;if(l=i[l],-1===l){const n=e[(r[t]+1)%e.length];return void(n!==u&&(yield n))}}while(l!==s)}find(t,n,e=0){if((t=+t)!=t||(n=+n)!=n)return-1;const r=e;let i;for(;(i=this._step(e,t,n))>=0&&i!==e&&i!==r;)e=i;return i}_step(t,n,e){const{inedges:r,hull:i,_hullIndex:o,halfedges:a,triangles:s,points:l}=this;if(-1===r[t]||!l.length)return(t+1)%(l.length>>1);let u=t,c=Ki(n-l[2*t],2)+Ki(e-l[2*t+1],2);const h=r[t];let f=h;do{let r=s[f];const h=Ki(n-l[2*r],2)+Ki(e-l[2*r+1],2);if(h<c&&(c=h,u=r),f=f%3==2?f-2:f+1,s[f]!==t)break;if(f=a[f],-1===f){if(f=i[(o[t]+1)%i.length],f!==r&&Ki(n-l[2*f],2)+Ki(e-l[2*f+1],2)<c)return f;break}}while(f!==h);return u}render(t){const n=null==t?t=new Bi:void 0,{points:e,halfedges:r,triangles:i}=this;for(let n=0,o=r.length;n<o;++n){const o=r[n];if(o<n)continue;const a=2*i[n],s=2*i[o];t.moveTo(e[a],e[a+1]),t.lineTo(e[s],e[s+1])}return this.renderHull(t),n&&n.value()}renderPoints(t,n){void 0!==n||t&&"function"==typeof t.moveTo||(n=t,t=null),n=null==n?2:+n;const e=null==t?t=new Bi:void 0,{points:r}=this;for(let e=0,i=r.length;e<i;e+=2){const i=r[e],o=r[e+1];t.moveTo(i+n,o),t.arc(i,o,n,0,Xi)}return e&&e.value()}renderHull(t){const n=null==t?t=new Bi:void 0,{hull:e,points:r}=this,i=2*e[0],o=e.length;t.moveTo(r[i],r[i+1]);for(let n=1;n<o;++n){const i=2*e[n];t.lineTo(r[i],r[i+1])}return t.closePath(),n&&n.value()}hullPolygon(){const t=new Di;return this.renderHull(t),t.value()}renderTriangle(t,n){const e=null==n?n=new Bi:void 0,{points:r,triangles:i}=this,o=2*i[t*=3],a=2*i[t+1],s=2*i[t+2];return n.moveTo(r[o],r[o+1]),n.lineTo(r[a],r[a+1]),n.lineTo(r[s],r[s+1]),n.closePath(),e&&e.value()}*trianglePolygons(){const{triangles:t}=this;for(let n=0,e=t.length/3;n<e;++n)yield this.trianglePolygon(n)}trianglePolygon(t){const n=new Di;return this.renderTriangle(t,n),n.value()}}function Qi(n){let e,r,i,o,a,s,l,u,c,h,w,x,M,$,k,S,E,N,A,T,F;return{c(){e=m("svg"),r=m("text"),i=y(to),a=m("circle"),l=m("circle"),c=m("circle"),w=m("text"),x=y(no),$=v(),k=g("div"),S=v(),E=g("h2"),N=y(n[4]),A=v(),T=g("h2"),F=y(n[5]),_(r,"class","number svelte-14zy518"),_(r,"x",o=n[0]/2-80),_(r,"y","22.5"),_(a,"cx",s=n[0]/2-30),_(a,"cy","20"),_(a,"r",n[1]),_(a,"class","svelte-14zy518"),_(l,"cx",u=n[0]/2-20),_(l,"cy","20"),_(l,"r",n[2]),_(l,"class","svelte-14zy518"),_(c,"cx",h=n[0]/2+5),_(c,"cy","20"),_(c,"r",n[3]),_(c,"class","svelte-14zy518"),_(w,"class","number svelte-14zy518"),_(w,"x",M=n[0]/2+35),_(w,"y","22.5"),_(e,"width",n[0]),_(e,"height","40"),b(k,"--deg","90deg"),b(k,"--gradient-1",n[6][0]),b(k,"--gradient-2",n[6][1]),b(k,"--gradient-3",n[6][2]),b(k,"width",n[7]+"px"),b(k,"height","10px"),_(k,"class","svelte-14zy518"),b(E,"left",n[0]/2-n[7]/2+"px"),b(E,"color",n[6][0]),_(E,"class","svelte-14zy518"),b(T,"left",n[0]/2+n[7]/2-55+"px"),b(T,"color",n[6][2]),_(T,"class","svelte-14zy518")},m(t,n){d(t,e,n),f(e,r),f(r,i),f(e,a),f(e,l),f(e,c),f(e,w),f(w,x),d(t,$,n),d(t,k,n),d(t,S,n),d(t,E,n),f(E,N),d(t,A,n),d(t,T,n),f(T,F)},p(t,[n]){1&n&&o!==(o=t[0]/2-80)&&_(r,"x",o),1&n&&s!==(s=t[0]/2-30)&&_(a,"cx",s),1&n&&u!==(u=t[0]/2-20)&&_(l,"cx",u),1&n&&h!==(h=t[0]/2+5)&&_(c,"cx",h),1&n&&M!==(M=t[0]/2+35)&&_(w,"x",M),1&n&&_(e,"width",t[0]),1&n&&b(E,"left",t[0]/2-t[7]/2+"px"),1&n&&b(T,"left",t[0]/2+t[7]/2-55+"px")},i:t,o:t,d(t){t&&p(e),t&&p($),t&&p(k),t&&p(S),t&&p(E),t&&p(A),t&&p(T)}}}let to="$100",no="$10,000";function eo(t,n,e){let{width:r,reference_year:i}=n,o=ri().domain([0,3e4]).range([1,50]),a=o(100),s=o(1e3),l=o(1e4),u="↓ from "+i,c="↑ from "+i,h=r/3;return t.$$set=t=>{"width"in t&&e(0,r=t.width),"reference_year"in t&&e(8,i=t.reference_year)},[r,a,s,l,u,c,["#a50026","#ffffbf","#313695"],h,i]}class ro extends V{constructor(t){super(),Y(this,t,eo,Qi,o,{width:0,reference_year:8})}}function io(t,n,e){const r=t.slice();return r[19]=n[e].lat,r[20]=n[e].lon,r[21]=n[e].show,r[22]=n[e].amount,r[23]=n[e].scaled_amount,r[24]=n[e].change,r[25]=n[e].id,r[26]=n[e].name,r[27]=n[e].state,r}function oo(t,n,e){const r=t.slice();return r[30]=n[e],r}function ao(t){let n,e,r,i;const o=[lo,so],a=[];function s(t,n){return t[9]?1:0}return n=s(t),e=a[n]=o[n](t),{c(){e.c(),r=w()},m(t,e){a[n].m(t,e),d(t,r,e),i=!0},p(t,i){let l=n;n=s(t),n===l?a[n].p(t,i):(G(),B(a[l],1,1,(()=>{a[l]=null})),H(),e=a[n],e?e.p(t,i):(e=a[n]=o[n](t),e.c()),O(e,1),e.m(r.parentNode,r))},i(t){i||(O(e),i=!0)},o(t){B(e),i=!1},d(t){a[n].d(t),t&&p(r)}}}function so(n){let e,r,i;return{c(){var t,o;e=g("div"),r=g("img"),b(r,"max-width","100%"),t=r.src,o=i="https://raw.githubusercontent.com/ChampeBarton/nra-donations/7859c7cf1887caccf534e6bbcb4f3a12f9ff1fd1/mobile-version.png",a||(a=document.createElement("a")),a.href=o,t!==a.href&&_(r,"src","https://raw.githubusercontent.com/ChampeBarton/nra-donations/7859c7cf1887caccf534e6bbcb4f3a12f9ff1fd1/mobile-version.png"),_(r,"alt","Map of NRA donations broken down by U.S. County"),_(e,"width",n[0])},m(t,n){d(t,e,n),f(e,r)},p(t,n){1&n[0]&&_(e,"width",t[0])},i:t,o:t,d(t){t&&p(e)}}}function lo(t){let n,e,r,i,o,a,s,l,u,c,h;i=new ro({props:{width:t[0],reference_year:mo}});let y=t[3]&&uo(t);return u=new lt({props:{width:t[0],height:t[2],style:"position: absolute; cursor: pointer",$$slots:{default:[po]},$$scope:{ctx:t}}}),u.$on("mousemove",t[15]),u.$on("mouseout",t[16]),{c(){n=g("header"),e=g("h1"),e.textContent="Amount Donated to the NRA by County in 2022",r=v(),W(i.$$.fragment),o=v(),a=g("div"),s=m("svg"),y&&y.c(),l=v(),W(u.$$.fragment),_(e,"class","svelte-1ykewl7"),_(s,"width",t[0]),_(s,"height",t[2]),_(s,"class","svelte-1ykewl7"),R((()=>t[17].call(a)))},m(m,v){d(m,n,v),f(n,e),f(n,r),X(i,n,null),d(m,o,v),d(m,a,v),f(a,s),y&&y.m(s,null),f(a,l),X(u,a,null),c=function(t,n){"static"===getComputedStyle(t).position&&(t.style.position="relative");const e=g("iframe");e.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),e.setAttribute("aria-hidden","true"),e.tabIndex=-1;const r=M();let i;return r?(e.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",i=x(window,"message",(t=>{t.source===e.contentWindow&&n()}))):(e.src="about:blank",e.onload=()=>{i=x(e.contentWindow,"resize",n)}),f(t,e),()=>{(r||i&&e.contentWindow)&&i(),p(e)}}(a,t[17].bind(a)),h=!0},p(t,n){const e={};1&n[0]&&(e.width=t[0]),i.$set(e),t[3]?y?y.p(t,n):(y=uo(t),y.c(),y.m(s,null)):y&&(y.d(1),y=null),(!h||1&n[0])&&_(s,"width",t[0]),(!h||4&n[0])&&_(s,"height",t[2]);const r={};1&n[0]&&(r.width=t[0]),4&n[0]&&(r.height=t[2]),546&n[0]|4&n[1]&&(r.$$scope={dirty:n,ctx:t}),u.$set(r)},i(t){h||(O(i.$$.fragment,t),O(u.$$.fragment,t),h=!0)},o(t){B(i.$$.fragment,t),B(u.$$.fragment,t),h=!1},d(t){t&&p(n),K(i),t&&p(o),t&&p(a),y&&y.d(),K(u),c()}}}function uo(t){let n,e=t[4],r=[];for(let n=0;n<e.length;n+=1)r[n]=co(oo(t,e,n));return{c(){n=m("g");for(let t=0;t<r.length;t+=1)r[t].c();_(n,"fill","rgb(233,233,233)")},m(t,e){d(t,n,e);for(let t=0;t<r.length;t+=1)r[t].m(n,null)},p(t,i){if(144&i[0]){let o;for(e=t[4],o=0;o<e.length;o+=1){const a=oo(t,e,o);r[o]?r[o].p(a,i):(r[o]=co(a),r[o].c(),r[o].m(n,null))}for(;o<r.length;o+=1)r[o].d(1);r.length=e.length}},d(t){t&&p(n),function(t,n){for(let e=0;e<t.length;e+=1)t[e]&&t[e].d(n)}(r,t)}}}function co(t){let n,e;return{c(){n=m("path"),_(n,"d",e=t[7](t[30])),_(n,"class","svelte-1ykewl7")},m(t,e){d(t,n,e)},p(t,r){144&r[0]&&e!==(e=t[7](t[30]))&&_(n,"d",e)},d(t){t&&p(n)}}}function ho(t){let n,e;return n=new Mi({props:{x:t[19],y:t[20],r:t[9]?t[23]:t[5]&&t[25]===t[1].at(-1).id&&!t[10]?t[23]+2:t[23],stroke:t[9]?null:t[5]&&t[25]===t[1].at(-1).id&&"#000",change:t[24],name:t[26],state:t[27],amount:t[22],reference_year:mo}}),{c(){W(n.$$.fragment)},m(t,r){X(n,t,r),e=!0},p(t,e){const r={};2&e[0]&&(r.x=t[19]),2&e[0]&&(r.y=t[20]),546&e[0]&&(r.r=t[9]?t[23]:t[5]&&t[25]===t[1].at(-1).id&&!t[10]?t[23]+2:t[23]),546&e[0]&&(r.stroke=t[9]?null:t[5]&&t[25]===t[1].at(-1).id&&"#000"),2&e[0]&&(r.change=t[24]),2&e[0]&&(r.name=t[26]),2&e[0]&&(r.state=t[27]),2&e[0]&&(r.amount=t[22]),n.$set(r)},i(t){e||(O(n.$$.fragment,t),e=!0)},o(t){B(n.$$.fragment,t),e=!1},d(t){K(n,t)}}}function fo(t,n){let e,r,i,o=n[21]&&ho(n);return{key:t,first:null,c(){e=w(),o&&o.c(),r=w(),this.first=e},m(t,n){d(t,e,n),o&&o.m(t,n),d(t,r,n),i=!0},p(t,e){(n=t)[21]?o?(o.p(n,e),2&e[0]&&O(o,1)):(o=ho(n),o.c(),O(o,1),o.m(r.parentNode,r)):o&&(G(),B(o,1,1,(()=>{o=null})),H())},i(t){i||(O(o),i=!0)},o(t){B(o),i=!1},d(t){t&&p(e),o&&o.d(t),t&&p(r)}}}function po(t){let n,e,r=[],i=new Map,o=t[1];const a=t=>t[25];for(let n=0;n<o.length;n+=1){let e=io(t,o,n),s=a(e);i.set(s,r[n]=fo(s,e))}return{c(){for(let t=0;t<r.length;t+=1)r[t].c();n=w()},m(t,i){for(let n=0;n<r.length;n+=1)r[n].m(t,i);d(t,n,i),e=!0},p(t,e){1570&e[0]&&(o=t[1],G(),r=function(t,n,e,r,i,o,a,s,l,u,c,h){let f=t.length,d=o.length,p=f;const g={};for(;p--;)g[t[p].key]=p;const m=[],y=new Map,v=new Map;for(p=d;p--;){const t=h(i,o,p),s=e(t);let l=a.get(s);l?r&&l.p(t,n):(l=u(s,t),l.c()),y.set(s,m[p]=l),s in g&&v.set(s,Math.abs(p-g[s]))}const w=new Set,x=new Set;function _(t){O(t,1),t.m(s,c),a.set(t.key,t),c=t.first,d--}for(;f&&d;){const n=m[d-1],e=t[f-1],r=n.key,i=e.key;n===e?(c=n.first,f--,d--):y.has(i)?!a.has(r)||w.has(r)?_(n):x.has(i)?f--:v.get(r)>v.get(i)?(x.add(r),_(n)):(w.add(i),f--):(l(e,a),f--)}for(;f--;){const n=t[f];y.has(n.key)||l(n,a)}for(;d;)_(m[d-1]);return m}(r,e,a,1,t,o,i,n.parentNode,D,fo,n,io),H())},i(t){if(!e){for(let t=0;t<o.length;t+=1)O(r[t]);e=!0}},o(t){for(let t=0;t<r.length;t+=1)B(r[t]);e=!1},d(t){for(let n=0;n<r.length;n+=1)r[n].d(t);t&&p(n)}}}function go(t){let n,e,r,i;R(t[14]);let o=t[8]&&ao(t);return{c(){o&&o.c(),n=w()},m(a,s){o&&o.m(a,s),d(a,n,s),e=!0,r||(i=x(window,"resize",t[14]),r=!0)},p(t,e){t[8]?o?(o.p(t,e),256&e[0]&&O(o,1)):(o=ao(t),o.c(),O(o,1),o.m(n.parentNode,n)):o&&(G(),B(o,1,1,(()=>{o=null})),H())},i(t){e||(O(o),e=!0)},o(t){B(o),e=!1},d(t){o&&o.d(t),t&&p(n),r=!1,i()}}}let mo=2020;function yo(t,n,e){let r,i,o,a,s,l,u;c(t,nt,(t=>e(8,l=t))),c(t,et,(t=>e(9,u=t)));let h,f,d,p=1e3,g=[],m=ri().domain([0,3e4]).range([1,50]);S((async()=>{const t=await fetch("https://cdn.jsdelivr.net/npm/us-atlas@3/states-albers-10m.json");var n,r;e(3,h=await t.json()),e(4,d=(n=h,r=h.objects.states,"string"==typeof r&&(r=n.objects[r]),"GeometryCollection"===r.type?{type:"FeatureCollection",features:r.geometries.map((function(t){return gt(n,t)}))}:gt(n,r)).features),e(11,f=await vi("https://raw.githubusercontent.com/ChampeBarton/nra-donations/main/election_ready.csv"))}));let y;return t.$$.update=()=>{1&t.$$.dirty[0]&&e(2,r=.6256*p),1&t.$$.dirty[0]&&e(13,i=function(){var t,n,e,r,i,o,a,s=1,l=0,u=0,c=1,h=1,f=0,d=null,p=1,g=1,m=Me({point:function(t,n){var e=w([t,n]);this.stream.point(e[0],e[1])}}),y=Sn;function v(){return p=s*c,g=s*h,o=a=null,w}function w(e){var r=e[0]*p,i=e[1]*g;if(f){var o=i*t-r*n;r=r*t+i*n,i=o}return[r+l,i+u]}return w.invert=function(e){var r=e[0]-l,i=e[1]-u;if(f){var o=i*t+r*n;r=r*t-i*n,i=o}return[r/p,i/g]},w.stream=function(t){return o&&a===t?o:o=m(y(a=t))},w.postclip=function(t){return arguments.length?(y=t,d=e=r=i=null,v()):y},w.clipExtent=function(t){return arguments.length?(y=null==t?(d=e=r=i=null,Sn):_n(d=+t[0][0],e=+t[0][1],r=+t[1][0],i=+t[1][1]),v()):null==d?null:[[d,e],[r,i]]},w.scale=function(t){return arguments.length?(s=+t,v()):s},w.translate=function(t){return arguments.length?(l=+t[0],u=+t[1],v()):[l,u]},w.angle=function(e){return arguments.length?(n=It(f=e%360*zt),t=jt(f),v()):f*Ft},w.reflectX=function(t){return arguments.length?(c=t?-1:1,v()):c<0},w.reflectY=function(t){return arguments.length?(h=t?-1:1,v()):h<0},w.fitExtent=function(t,n){return Se(w,t,n)},w.fitSize=function(t,n){return Ee(w,t,n)},w.fitWidth=function(t,n){return Ne(w,t,n)},w.fitHeight=function(t,n){return Ae(w,t,n)},w}().scale(p/975)),5&t.$$.dirty[0]&&e(12,o=Ie().scale(1.33*p).translate([.5*p,.5*r])),8192&t.$$.dirty[0]&&e(7,a=function(t,n){var e,r,i=4.5;function o(t){return t&&("function"==typeof i&&r.pointRadius(+i.apply(this,arguments)),Xt(t,e(r))),r.result()}return o.area=function(t){return Xt(t,e(Rn)),Rn.result()},o.measure=function(t){return Xt(t,e(xe)),xe.result()},o.bounds=function(t){return Xt(t,e(On)),On.result()},o.centroid=function(t){return Xt(t,e(ue)),ue.result()},o.projection=function(n){return arguments.length?(e=null==n?(t=null,Sn):(t=n).stream,o):t},o.context=function(t){return arguments.length?(r=null==t?(n=null,new _e):new ce(n=t),"function"!=typeof i&&r.pointRadius(i),o):n},o.pointRadius=function(t){return arguments.length?(i="function"==typeof t?t:(r.pointRadius(+t),+t),o):i},o.projection(t).context(n)}(i)),2048&t.$$.dirty[0]&&void 0!==f&&f.forEach((t=>{t.lat=+t.lat,t.lon=+t.lon,t.scaled_amount=0==+t.amount?0:m(+t.amount),t.year=+t.year,t.change=+t.change})),6144&t.$$.dirty[0]&&e(1,g=void 0!==f?f.filter((t=>0!=+t.amount&&2022==+t.year)).map(((t,n)=>{var e=o([t.lon,t.lat]),r=null!==e?e[0]:null,i=null!==e?e[1]:null,a=+t.year,s=+t.scaled_amount;return{lat:r,lon:i,year:a,amount:+t.amount,scaled_amount:s,change:+t.change!=+t.change?0:+t.change,show:2022==a,id:n,name:t.name,state:t.state}})).sort(((t,n)=>Math.abs(t.change)-Math.abs(n.change))):[]),2&t.$$.dirty[0]&&e(6,s=Ji.from(g,(t=>t.lat),(t=>t.lon)))},[p,g,r,h,d,y,s,a,l,u,!1,f,o,i,function(){nt.set(l=window.innerWidth)},({clientX:t,clientY:n})=>{u||e(5,y=s.find(t-10,n-120))&&e(1,g=[...g.filter(((t,n)=>n!==y)),g[y]])},()=>e(5,y=null),function(){p=this.clientWidth,e(0,p)}]}return new class extends V{constructor(t){super(),Y(this,t,yo,go,o,{},null,[-1,-1])}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
